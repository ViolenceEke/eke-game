import{systemToComponent as t}from"@virtuoso.dev/react-urx";import*as e from"@virtuoso.dev/urx";import{getValue as n,tup as o,system as r,stream as i,streamFromEmitter as a,pipe as l,map as s,connect as u,prop as c,combineLatest as m,filter as d,distinctUntilChanged as f,statefulStream as p,noop as h,subscribe as g,publish as v,statefulStreamFromEmitter as S,withLatestFrom as I,compose as C}from"@virtuoso.dev/urx";import*as x from"react";import{useRef as T,useCallback as w,useEffect as y,useLayoutEffect as b,createElement as E}from"react";function H(){return H=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t},H.apply(this,arguments)}function R(t,e){if(null==t)return{};var n,o,r={},i=Object.keys(t);for(o=0;o<i.length;o++)e.indexOf(n=i[o])>=0||(r[n]=t[n]);return r}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}function k(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return L(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?L(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0;return function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function z(t,e){return!(!t||t[0]!==e[0]||t[1]!==e[1])}function B(t,e){return!(!t||t.startIndex!==e.startIndex||t.endIndex!==e.endIndex)}var F,P,O=e.system(function(){var t=e.stream(),n=e.stream(),o=e.statefulStream(0),r=e.stream(),i=e.statefulStream(0),a=e.stream(),l=e.stream(),s=e.statefulStream(0),u=e.statefulStream(0),c=e.stream(),m=e.stream(),d=e.statefulStream(!1);return e.connect(e.pipe(t,e.map(function(t){return t[0]})),n),e.connect(e.pipe(t,e.map(function(t){return t[1]})),l),e.connect(n,i),{scrollContainerState:t,scrollTop:n,viewportHeight:a,headerHeight:s,footerHeight:u,scrollHeight:l,smoothScrollTargetReached:r,scrollTo:c,scrollBy:m,statefulScrollTop:i,deviation:o,scrollingInProgress:d}},[],{singleton:!0});!function(t){t[t.DEBUG=0]="DEBUG",t[t.INFO=1]="INFO",t[t.WARN=2]="WARN",t[t.ERROR=3]="ERROR"}(P||(P={}));var M=((F={})[P.DEBUG]="debug",F[P.INFO]="log",F[P.WARN]="warn",F[P.ERROR]="error",F),V=e.system(function(){var t=e.statefulStream(P.ERROR);return{log:e.statefulStream(function(n,o,r){var i;void 0===r&&(r=P.INFO),r>=(null!=(i=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?i:e.getValue(t))&&console[M[r]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",n,o)}),logLevel:t}},[],{singleton:!0}),U=e.system(function(t){var o=t[0].log,r=e.statefulStream(!1),i=e.streamFromEmitter(e.pipe(r,e.filter(function(t){return t}),e.distinctUntilChanged()));return e.subscribe(r,function(t){t&&n(o)("props updated",{},P.DEBUG)}),{propsReady:r,didMount:i}},o(V),{singleton:!0}),A="up",W={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},N=e.system(function(t){var n=t[0],o=n.scrollContainerState,r=n.scrollTop,i=n.viewportHeight,a=n.headerHeight,l=n.footerHeight,s=n.scrollBy,u=e.statefulStream(!1),c=e.statefulStream(!0),m=e.stream(),d=e.stream(),f=e.statefulStream(4),p=e.streamFromEmitter(e.pipe(e.merge(e.pipe(e.duc(r),e.skip(1),e.mapTo(!0)),e.pipe(e.duc(r),e.skip(1),e.mapTo(!1),e.debounceTime(100))),e.distinctUntilChanged())),h=e.statefulStreamFromEmitter(e.pipe(e.merge(e.pipe(s,e.mapTo(!0)),e.pipe(s,e.mapTo(!1),e.debounceTime(200))),e.distinctUntilChanged()),!1);e.connect(e.pipe(e.duc(r),e.map(function(t){return 0===t}),e.distinctUntilChanged()),c),e.connect(c,d);var g=e.streamFromEmitter(e.pipe(e.combineLatest(o,e.duc(i),e.duc(a),e.duc(l),e.duc(f)),e.scan(function(t,e){var n,o,r=e[0],i=r[0],a=r[1],l=e[1],s={viewportHeight:l,scrollTop:i,scrollHeight:a};return i+l-a>-e[4]?(i>t.state.scrollTop?(n="SCROLLED_DOWN",o=t.state.scrollTop-i):(n="SIZE_DECREASED",o=t.state.scrollTop-i||t.scrollTopDelta),{atBottom:!0,state:s,atBottomBecause:n,scrollTopDelta:o}):{atBottom:!1,notAtBottomBecause:s.scrollHeight>t.state.scrollHeight?"SIZE_INCREASED":l<t.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":i<t.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:s}},W),e.distinctUntilChanged(function(t,e){return t&&t.atBottom===e.atBottom}))),v=e.statefulStreamFromEmitter(e.pipe(o,e.scan(function(t,e){var n=e[0],o=e[1];return t.scrollHeight!==o?t.scrollTop!==n?{scrollHeight:o,scrollTop:n,jump:t.scrollTop-n,changed:!0}:{scrollHeight:o,scrollTop:n,jump:0,changed:!0}:{scrollTop:n,scrollHeight:o,jump:0,changed:!1}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),e.filter(function(t){return t.changed}),e.map(function(t){return t.jump})),0);e.connect(e.pipe(g,e.map(function(t){return t.atBottom})),u),e.connect(e.pipe(u,e.throttleTime(50)),m);var S=e.statefulStream("down");e.connect(e.pipe(o,e.map(function(t){return t[0]}),e.distinctUntilChanged(),e.scan(function(t,n){return e.getValue(h)?{direction:t.direction,prevScrollTop:n}:{direction:n<t.prevScrollTop?A:"down",prevScrollTop:n}},{direction:"down",prevScrollTop:0}),e.map(function(t){return t.direction})),S),e.connect(e.pipe(o,e.throttleTime(50),e.mapTo("none")),S);var I=e.statefulStream(0);return e.connect(e.pipe(p,e.filter(function(t){return!t}),e.mapTo(0)),I),e.connect(e.pipe(r,e.throttleTime(100),e.withLatestFrom(p),e.filter(function(t){return!!t[1]}),e.scan(function(t,e){return[t[1],e[0]]},[0,0]),e.map(function(t){return t[1]-t[0]})),I),{isScrolling:p,isAtTop:c,isAtBottom:u,atBottomState:g,atTopStateChange:d,atBottomStateChange:m,scrollDirection:S,atBottomThreshold:f,scrollVelocity:I,lastJumpDueToItemResize:v}},e.tup(O)),D=e.system(function(t){var n=t[0].scrollVelocity,o=e.statefulStream(!1),r=e.stream(),i=e.statefulStream(!1);return e.connect(e.pipe(n,e.withLatestFrom(i,o,r),e.filter(function(t){return!!t[1]}),e.map(function(t){var e=t[0],n=t[1],o=t[2],r=t[3],i=n.enter;if(o){if((0,n.exit)(e,r))return!1}else if(i(e,r))return!0;return o}),e.distinctUntilChanged()),o),e.subscribe(e.pipe(e.combineLatest(o,n,r),e.withLatestFrom(i)),function(t){var e=t[0],n=t[1];return e[0]&&n&&n.change&&n.change(e[1],e[2])}),{isSeeking:o,scrollSeekConfiguration:i,scrollVelocity:n,scrollSeekRangeChanged:r}},e.tup(N),{singleton:!0}),G={lvl:0};function _(t,e,n,o,r){return void 0===o&&(o=G),void 0===r&&(r=G),{k:t,v:e,lvl:n,l:o,r:r}}function j(t){return t===G}function K(){return G}function Y(t,e){if(j(t))return G;var n=t.k,o=t.l,r=t.r;if(e===n){if(j(o))return r;if(j(r))return o;var i=Q(o);return nt(tt(t,{k:i[0],v:i[1],l:X(o)}))}return nt(tt(t,e<n?{l:Y(o,e)}:{r:Y(r,e)}))}function Z(t,e,n){if(void 0===n&&(n="k"),j(t))return[-Infinity,void 0];if(t[n]===e)return[t.k,t.v];if(t[n]<e){var o=Z(t.r,e,n);return-Infinity===o[0]?[t.k,t.v]:o}return Z(t.l,e,n)}function q(t,e,n){return j(t)?_(e,n,1):e===t.k?tt(t,{k:e,v:n}):function(t){return it(at(t))}(tt(t,e<t.k?{l:q(t.l,e,n)}:{r:q(t.r,e,n)}))}function J(t,e,n){if(j(t))return[];var o=t.k,r=t.v,i=t.r,a=[];return o>e&&(a=a.concat(J(t.l,e,n))),o>=e&&o<=n&&a.push({k:o,v:r}),o<=n&&(a=a.concat(J(i,e,n))),a}function $(t){return j(t)?[]:[].concat($(t.l),[{k:t.k,v:t.v}],$(t.r))}function Q(t){return j(t.r)?[t.k,t.v]:Q(t.r)}function X(t){return j(t.r)?t.l:nt(tt(t,{r:X(t.r)}))}function tt(t,e){return _(void 0!==e.k?e.k:t.k,void 0!==e.v?e.v:t.v,void 0!==e.lvl?e.lvl:t.lvl,void 0!==e.l?e.l:t.l,void 0!==e.r?e.r:t.r)}function et(t){return j(t)||t.lvl>t.r.lvl}function nt(t){var e=t.l,n=t.r,o=t.lvl;if(n.lvl>=o-1&&e.lvl>=o-1)return t;if(o>n.lvl+1){if(et(e))return at(tt(t,{lvl:o-1}));if(j(e)||j(e.r))throw new Error("Unexpected empty nodes");return tt(e.r,{l:tt(e,{r:e.r.l}),r:tt(t,{l:e.r.r,lvl:o-1}),lvl:o})}if(et(t))return it(tt(t,{lvl:o-1}));if(j(n)||j(n.l))throw new Error("Unexpected empty nodes");var r=n.l,i=et(r)?n.lvl-1:n.lvl;return tt(r,{l:tt(t,{r:r.l,lvl:o-1}),r:it(tt(n,{l:r.r,lvl:i})),lvl:r.lvl+1})}function ot(t,e,n){return j(t)?[]:rt(J(t,Z(t,e)[0],n),function(t){return{index:t.k,value:t.v}})}function rt(t,e){var n=t.length;if(0===n)return[];for(var o=e(t[0]),r=o.index,i=o.value,a=[],l=1;l<n;l++){var s=e(t[l]),u=s.index,c=s.value;a.push({start:r,end:u-1,value:i}),r=u,i=c}return a.push({start:r,end:Infinity,value:i}),a}function it(t){var e=t.r,n=t.lvl;return j(e)||j(e.r)||e.lvl!==n||e.r.lvl!==n?t:tt(e,{l:tt(t,{r:e.l}),lvl:n+1})}function at(t){var e=t.l;return j(e)||e.lvl!==t.lvl?t:tt(e,{r:tt(t,{l:e.r})})}function lt(t,e,n,o){void 0===o&&(o=0);for(var r=t.length-1;o<=r;){var i=Math.floor((o+r)/2),a=n(t[i],e);if(0===a)return i;if(-1===a){if(r-o<2)return i-1;r=i-1}else{if(r===o)return i;o=i+1}}throw new Error("Failed binary finding record in array - "+t.join(",")+", searched for "+e)}function st(t,e,n){return t[lt(t,e,n)]}function ut(t,e){return Math.round(t.getBoundingClientRect()[e])}function ct(t){var e=t.size,n=t.startIndex,o=t.endIndex;return function(t){return t.start===n&&(t.end===o||Infinity===t.end)&&t.value===e}}function mt(t,e){var n=t.index;return e===n?0:e<n?-1:1}function dt(t,e){var n=t.offset;return e===n?0:e<n?-1:1}function ft(t){return{index:t.index,value:t}}function pt(t,e,n){var o=t,r=0,i=0,a=0,l=0;if(0!==e){a=o[l=lt(o,e-1,mt)].offset;var s=Z(n,e-1);r=s[0],i=s[1],o.length&&o[l].size===Z(n,e)[1]&&(l-=1),o=o.slice(0,l+1)}else o=[];for(var u,c=k(ot(n,e,Infinity));!(u=c()).done;){var m=u.value,d=m.start,f=m.value,p=(d-r)*i+a;o.push({offset:p,size:f,index:d}),r=d,a=p,i=f}return{offsetTree:o,lastIndex:r,lastOffset:a,lastSize:i}}function ht(t,e){var n=e[0],o=e[1];n.length>0&&(0,e[2])("received item sizes",n,P.DEBUG);var r=t.sizeTree,i=r,a=0;if(o.length>0&&j(r)&&2===n.length){var l=n[0].size,s=n[1].size;i=o.reduce(function(t,e){return q(q(t,e,l),e+1,s)},i)}else{var u=function(t,e){for(var n,o=j(t)?0:Infinity,r=k(e);!(n=r()).done;){var i=n.value,a=i.size,l=i.startIndex,s=i.endIndex;if(o=Math.min(o,l),j(t))t=q(t,0,a);else{var u=ot(t,l-1,s+1);if(!u.some(ct(i))){for(var c,m=!1,d=!1,f=k(u);!(c=f()).done;){var p=c.value,h=p.start,g=p.end,v=p.value;m?(s>=h||a===v)&&(t=Y(t,h)):(d=v!==a,m=!0),g>s&&s>=h&&v!==a&&(t=q(t,s+1,v))}d&&(t=q(t,l,a))}}}return[t,o]}(i,n);i=u[0],a=u[1]}if(i===r)return t;var c=pt(t.offsetTree,a,i),m=c.offsetTree;return{sizeTree:i,offsetTree:m,lastIndex:c.lastIndex,lastOffset:c.lastOffset,lastSize:c.lastSize,groupOffsetTree:o.reduce(function(t,e){return q(t,e,gt(e,m))},K()),groupIndices:o}}function gt(t,e){if(0===e.length)return 0;var n=st(e,t,mt);return n.size*(t-n.index)+n.offset}function vt(t,e){if(!St(e))return t;for(var n=0;e.groupIndices[n]<=t+n;)n++;return t+n}function St(t){return!j(t.groupOffsetTree)}var It={offsetHeight:"height",offsetWidth:"width"},Ct=e.system(function(t){var n=t[0].log,o=e.stream(),r=e.stream(),i=e.statefulStreamFromEmitter(r,0),a=e.stream(),l=e.stream(),s=e.statefulStream(0),u=e.statefulStream([]),c=e.statefulStream(void 0),m=e.statefulStream(void 0),d=e.statefulStream(function(t,e){return ut(t,It[e])}),f=e.statefulStream(void 0),p={offsetTree:[],sizeTree:K(),groupOffsetTree:K(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},h=e.statefulStreamFromEmitter(e.pipe(o,e.withLatestFrom(u,n),e.scan(ht,p),e.distinctUntilChanged()),p);e.connect(e.pipe(u,e.filter(function(t){return t.length>0}),e.withLatestFrom(h),e.map(function(t){var e=t[0],n=t[1],o=e.reduce(function(t,e,o){return q(t,e,gt(e,n.offsetTree)||o)},K());return H({},n,{groupIndices:e,groupOffsetTree:o})})),h),e.connect(e.pipe(r,e.withLatestFrom(h),e.filter(function(t){return t[0]<t[1].lastIndex}),e.map(function(t){var e=t[1];return[{startIndex:t[0],endIndex:e.lastIndex,size:e.lastSize}]})),o),e.connect(c,m);var g=e.statefulStreamFromEmitter(e.pipe(c,e.map(function(t){return void 0===t})),!0);e.connect(e.pipe(m,e.filter(function(t){return void 0!==t&&j(e.getValue(h).sizeTree)}),e.map(function(t){return[{startIndex:0,endIndex:0,size:t}]})),o);var v=e.streamFromEmitter(e.pipe(o,e.withLatestFrom(h),e.scan(function(t,e){var n=e[1];return{changed:n!==t.sizes,sizes:n}},{changed:!1,sizes:p}),e.map(function(t){return t.changed})));e.subscribe(e.pipe(s,e.scan(function(t,e){return{diff:t.prev-e,prev:e}},{diff:0,prev:0}),e.map(function(t){return t.diff})),function(t){t>0?e.publish(a,t):t<0&&e.publish(l,t)}),e.subscribe(e.pipe(s,e.withLatestFrom(n)),function(t){t[0]<0&&(0,t[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:s},P.ERROR)});var S=e.streamFromEmitter(a);e.connect(e.pipe(a,e.withLatestFrom(h),e.map(function(t){var e=t[0],n=t[1];if(n.groupIndices.length>0)throw new Error("Virtuoso: prepending items does not work with groups");return $(n.sizeTree).reduce(function(t,n){var o=n.k,r=n.v;return{ranges:[].concat(t.ranges,[{startIndex:t.prevIndex,endIndex:o+e-1,size:t.prevSize}]),prevIndex:o+e,prevSize:r}},{ranges:[],prevIndex:0,prevSize:n.lastSize}).ranges})),o);var I=e.streamFromEmitter(e.pipe(l,e.withLatestFrom(h),e.map(function(t){return gt(-t[0],t[1].offsetTree)})));return e.connect(e.pipe(l,e.withLatestFrom(h),e.map(function(t){var e=t[0],n=t[1];if(n.groupIndices.length>0)throw new Error("Virtuoso: shifting items does not work with groups");var o=$(n.sizeTree).reduce(function(t,n){var o=n.v;return q(t,Math.max(0,n.k+e),o)},K());return H({},n,{sizeTree:o},pt(n.offsetTree,0,o))})),h),{data:f,totalCount:r,sizeRanges:o,groupIndices:u,defaultItemSize:m,fixedItemSize:c,unshiftWith:a,shiftWith:l,shiftWithOffset:I,beforeUnshiftWith:S,firstItemIndex:s,sizes:h,listRefresh:v,statefulTotalCount:i,trackItemSizes:g,itemSize:d}},e.tup(V),{singleton:!0}),xt="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style;function Tt(t){var e="number"==typeof t?{index:t}:t;return e.align||(e.align="start"),e.behavior&&xt||(e.behavior="auto"),e.offset||(e.offset=0),e}var wt=e.system(function(t){var n=t[0],o=n.sizes,r=n.totalCount,i=n.listRefresh,a=t[1],l=a.scrollingInProgress,s=a.viewportHeight,u=a.scrollTo,c=a.smoothScrollTargetReached,m=a.headerHeight,d=a.footerHeight,f=t[2].log,p=e.stream(),h=e.statefulStream(0),g=null,v=null,S=null;function I(){g&&(g(),g=null),S&&(S(),S=null),v&&(clearTimeout(v),v=null),e.publish(l,!1)}return e.connect(e.pipe(p,e.withLatestFrom(o,s,r,h,m,d,f),e.map(function(t){var n=t[0],o=t[1],r=t[2],a=t[3],s=t[4],u=t[5],m=t[6],d=t[7],f=Tt(n),h=f.align,C=f.behavior,x=f.offset,T=a-1,w=f.index;"LAST"===w&&(w=T),w=vt(w,o);var y=gt(w=Math.max(0,w,Math.min(T,w)),o.offsetTree)+u;"end"===h?(y=y-r+Z(o.sizeTree,w)[1],w===T&&(y+=m)):"center"===h?y=y-r/2+Z(o.sizeTree,w)[1]/2:y-=s,x&&(y+=x);var b=function(t){I(),t?(d("retrying to scroll to",{location:n},P.DEBUG),e.publish(p,n)):d("list did not change, scroll successful",{},P.DEBUG)};if(I(),"smooth"===C){var E=!1;S=e.subscribe(i,function(t){E=E||t}),g=e.handleNext(c,function(){b(E)})}else g=e.handleNext(e.pipe(i,function(t){var e=setTimeout(function(){t(!1)},50);return function(n){n&&(t(!0),clearTimeout(e))}}),b);return v=setTimeout(function(){I()},1200),e.publish(l,!0),d("scrolling from index to",{index:w,top:y,behavior:C},P.DEBUG),{top:y,behavior:C}})),u),{scrollToIndex:p,topListHeight:h}},e.tup(Ct,O,V),{singleton:!0});function yt(t,e,n){return"number"==typeof t?n===A&&"top"===e||"down"===n&&"bottom"===e?t:0:n===A?"top"===e?t.main:t.reverse:"bottom"===e?t.main:t.reverse}function bt(t,e){return"number"==typeof t?t:t[e]||0}var Et=e.system(function(t){var n=t[0],o=n.scrollTop,r=n.viewportHeight,i=n.deviation,a=n.headerHeight,l=e.stream(),s=e.statefulStream(0),u=e.statefulStream(0),c=e.statefulStream(0),m=e.statefulStream(0),d=e.statefulStreamFromEmitter(e.pipe(e.combineLatest(e.duc(o),e.duc(r),e.duc(a),e.duc(l,z),e.duc(m),e.duc(s),e.duc(u),e.duc(i),e.duc(c)),e.map(function(t){var e=t[0],n=t[1],o=t[2],r=t[3],i=r[0],a=r[1],l=t[4],s=t[6],u=t[7],c=t[8],m=e-u,d=t[5]+s,f=Math.max(o-m,0),p="none",h=bt(c,"top"),g=bt(c,"bottom");return i-=u,a+=o,(i+=o)>e+d-h&&(p=A),(a-=u)<e-f+n+g&&(p="down"),"none"!==p?[Math.max(m-o-yt(l,"top",p)-h,0),m-f-s+n+yt(l,"bottom",p)+g]:null}),e.filter(function(t){return null!=t}),e.distinctUntilChanged(z)),[0,0]);return{listBoundary:l,overscan:m,topListHeight:s,fixedHeaderHeight:u,increaseViewportBy:c,visibleRange:d}},e.tup(O),{singleton:!0}),Ht=e.system(function(t){var n=t[0],o=n.scrollTo,r=n.scrollContainerState,i=e.stream(),a=e.stream(),l=e.stream(),s=e.statefulStream(!1),u=e.statefulStream(void 0);return e.connect(e.pipe(e.combineLatest(i,a),e.map(function(t){var e=t[0],n=e[1];return[Math.max(0,e[0]-t[1].offsetTop),n]})),r),e.connect(e.pipe(o,e.withLatestFrom(a),e.map(function(t){var e=t[0];return H({},e,{top:e.top+t[1].offsetTop})})),l),{useWindowScroll:s,customScrollParent:u,windowScrollContainerState:i,windowViewportRect:a,windowScrollTo:l}},e.tup(O)),Rt={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},Lt={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},kt=Math.round,zt=Math.ceil,Bt=Math.floor,Ft=Math.min,Pt=Math.max;function Ot(t,e){return Array.from({length:e-t+1}).map(function(e,n){return{index:n+t}})}var Mt=e.system(function(t){var n=t[0],o=n.overscan,r=n.visibleRange,i=n.listBoundary,a=t[1],l=a.scrollTop,s=a.viewportHeight,u=a.scrollBy,c=a.scrollTo,m=a.smoothScrollTargetReached,d=a.scrollContainerState,f=t[2],p=t[3],h=t[4],g=h.propsReady,v=h.didMount,S=t[5],I=S.windowViewportRect,C=S.windowScrollTo,x=S.useWindowScroll,T=S.customScrollParent,w=S.windowScrollContainerState,y=e.statefulStream(0),b=e.statefulStream(0),E=e.statefulStream(Rt),R=e.statefulStream({height:0,width:0}),L=e.statefulStream({height:0,width:0}),k=e.stream(),F=e.stream(),P=e.statefulStream(0);e.connect(e.pipe(v,e.withLatestFrom(b),e.filter(function(t){return 0!==t[1]}),e.map(function(t){return{items:Ot(0,t[1]-1),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),E),e.connect(e.pipe(e.combineLatest(e.duc(y),r,e.duc(L,function(t,e){return t&&t.width===e.width&&t.height===e.height})),e.withLatestFrom(R),e.map(function(t){var e=t[0],n=e[0],o=e[1],r=o[0],i=o[1],a=e[2],l=t[1],s=a.height,u=a.width,c=l.width;if(0===n||0===c)return Rt;if(0===u)return Lt;var m=At(c,u),d=m*Bt(r/s),f=m*zt(i/s)-1;f=Ft(n-1,f);var p=Ot(d=Ft(f,Pt(0,d)),f),h=Vt(l,a,p),g=h.top,v=h.bottom;return{items:p,offsetTop:g,offsetBottom:zt(n/m)*s-v,top:g,bottom:v,itemHeight:s,itemWidth:u}})),E),e.connect(e.pipe(R,e.map(function(t){return t.height})),s),e.connect(e.pipe(e.combineLatest(R,L,E),e.map(function(t){var e=Vt(t[0],t[1],t[2].items);return[e.top,e.bottom]}),e.distinctUntilChanged(z)),i);var O=e.streamFromEmitter(e.pipe(e.duc(E),e.filter(function(t){return t.items.length>0}),e.withLatestFrom(y),e.filter(function(t){var e=t[0].items;return e[e.length-1].index===t[1]-1}),e.map(function(t){return t[1]-1}),e.distinctUntilChanged())),M=e.streamFromEmitter(e.pipe(e.duc(E),e.filter(function(t){var e=t.items;return e.length>0&&0===e[0].index}),e.mapTo(0),e.distinctUntilChanged())),V=e.streamFromEmitter(e.pipe(e.duc(E),e.filter(function(t){return t.items.length>0}),e.map(function(t){var e=t.items;return{startIndex:e[0].index,endIndex:e[e.length-1].index}}),e.distinctUntilChanged(B)));e.connect(V,p.scrollSeekRangeChanged),e.connect(e.pipe(k,e.withLatestFrom(R,L,y),e.map(function(t){var e=t[1],n=t[2],o=t[3],r=Tt(t[0]),i=r.align,a=r.behavior,l=r.offset,s=r.index;"LAST"===s&&(s=o-1);var u=Ut(e,n,s=Pt(0,s,Ft(o-1,s)));return"end"===i?u=kt(u-e.height+n.height):"center"===i&&(u=kt(u-e.height/2+n.height/2)),l&&(u+=l),{top:u,behavior:a}})),c);var U=e.statefulStreamFromEmitter(e.pipe(E,e.map(function(t){return t.offsetBottom+t.bottom})),0);return e.connect(e.pipe(I,e.map(function(t){return{width:t.visibleWidth,height:t.visibleHeight}})),R),H({totalCount:y,viewportDimensions:R,itemDimensions:L,scrollTop:l,scrollHeight:F,overscan:o,scrollBy:u,scrollTo:c,scrollToIndex:k,smoothScrollTargetReached:m,windowViewportRect:I,windowScrollTo:C,useWindowScroll:x,customScrollParent:T,windowScrollContainerState:w,deviation:P,scrollContainerState:d,initialItemCount:b},p,{gridState:E,totalListHeight:U},f,{startReached:M,endReached:O,rangeChanged:V,propsReady:g})},e.tup(Et,O,N,D,U,Ht));function Vt(t,e,n){var o=e.height;return void 0===o||0===n.length?{top:0,bottom:0}:{top:Ut(t,e,n[0].index),bottom:Ut(t,e,n[n.length-1].index)+o}}function Ut(t,e,n){var o=At(t.width,e.width);return Bt(n/o)*e.height}function At(t,e){return Pt(1,Bt(t/e))}function Wt(t,e){void 0===e&&(e=!0);var n=T(null),o=function(t){};if("undefined"!=typeof ResizeObserver){var r=new ResizeObserver(function(e){var n=e[0].target;null!==n.offsetParent&&t(n)});o=function(t){t&&e?(r.observe(t),n.current=t):(n.current&&r.unobserve(n.current),n.current=null)}}return{ref:n,callbackRef:o}}function Nt(t,e){return void 0===e&&(e=!0),Wt(t,e).callbackRef}function Dt(t,e){var n=T(null),o=w(function(o){if(null!==o){var r,i,a=o.getBoundingClientRect(),l=a.width;if(e){var s=e.getBoundingClientRect(),u=a.top-s.top;r=s.height-Math.max(0,u),i=u+e.scrollTop}else r=window.innerHeight-Math.max(0,a.top),i=a.top+window.pageYOffset;n.current={offsetTop:i,visibleHeight:r,visibleWidth:l},t(n.current)}},[t,e]),r=Wt(o),i=r.callbackRef,a=r.ref,l=w(function(){o(a.current)},[o,a]);return y(function(){if(e){e.addEventListener("scroll",l);var t=new ResizeObserver(l);return t.observe(e),function(){e.removeEventListener("scroll",l),t.unobserve(e)}}return window.addEventListener("scroll",l),window.addEventListener("resize",l),function(){window.removeEventListener("scroll",l),window.removeEventListener("resize",l)}},[l,e]),i}var Gt="undefined"!=typeof document?b:y;function _t(t,e,n,o,r,i){return Nt(function(n){for(var a=function(t,e,n,o){var r=t.length;if(0===r)return null;for(var i=[],a=0;a<r;a++){var l=t.item(a);if(l&&void 0!==l.dataset.index){var s=parseInt(l.dataset.index),u=parseFloat(l.dataset.knownSize),c=e(l,"offsetHeight");if(0===c&&o("Zero-sized element, this should not happen",{child:l},P.ERROR),c!==u){var m=i[i.length-1];0===i.length||m.size!==c||m.endIndex!==s-1?i.push({startIndex:s,endIndex:s,size:c}):i[i.length-1].endIndex++}}}return i}(n.children,e,0,r),l=n.parentElement;!l.dataset.virtuosoScroller;)l=l.parentElement;var s=i?i.scrollTop:"window"===l.firstElementChild.dataset.viewportType?window.pageYOffset||document.documentElement.scrollTop:l.scrollTop;o(i?[Math.max(s,0),i.scrollHeight]:[Math.max(s,0),l.scrollHeight]),null!==a&&t(a)},n)}function jt(t,n,o,r,i){void 0===r&&(r=e.noop);var a=T(null),l=T(null),s=T(null),u=w(function(e){var o=e.target,r=o===window||o===document?window.pageYOffset||document.documentElement.scrollTop:o.scrollTop,i=o===window?document.documentElement.scrollHeight:o.scrollHeight;t([Math.max(r,0),i]),null!==l.current&&(r===l.current||r<=0||r===o.scrollHeight-ut(o,"height"))&&(l.current=null,n(!0),s.current&&(clearTimeout(s.current),s.current=null))},[t,n]);return y(function(){var t=i||a.current;return r(i||a.current),u({target:t}),t.addEventListener("scroll",u,{passive:!0}),function(){r(null),t.removeEventListener("scroll",u)}},[a,u,o,r,i]),{scrollerRef:a,scrollByCallback:function(t){null===l.current&&a.current.scrollBy(t)},scrollToCallback:function(e){var o=a.current;if(o&&(!("offsetHeight"in o)||0!==o.offsetHeight)){var r,i,u,c="smooth"===e.behavior;if(o===window?(i=Math.max(ut(document.documentElement,"height"),document.documentElement.scrollHeight),r=window.innerHeight,u=document.documentElement.scrollTop):(i=o.scrollHeight,r=ut(o,"height"),u=o.scrollTop),e.top=Math.ceil(Math.max(Math.min(i-r,e.top),0)),Math.abs(r-i)<1.01||e.top===u)return t([u,i]),void(c&&n(!0));c?(l.current=e.top,s.current&&clearTimeout(s.current),s.current=setTimeout(function(){s.current=null,l.current=null,n(!0)},1e3)):l.current=null,o.scrollTo(e)}}}}var Kt=e.system(function(t){var n=t[0],o=n.sizes,r=n.listRefresh,i=n.defaultItemSize,a=t[1].scrollTop,l=t[2].scrollToIndex,s=t[3].didMount,u=e.statefulStream(!0),c=e.statefulStream(0);return e.connect(e.pipe(s,e.withLatestFrom(c),e.filter(function(t){return!!t[1]}),e.mapTo(!1)),u),e.subscribe(e.pipe(e.combineLatest(r,s),e.withLatestFrom(u,o,i),e.filter(function(t){var e=t[1],n=t[3];return t[0][1]&&(!j(t[2].sizeTree)||void 0!==n)&&!e}),e.withLatestFrom(c)),function(t){var n=t[1];setTimeout(function(){e.handleNext(a,function(){e.publish(u,!0)}),e.publish(l,n)})}),{scrolledToInitialItem:u,initialTopMostItemIndex:c}},e.tup(Ct,O,wt,U),{singleton:!0});function Yt(t){return!!t&&("smooth"===t?"smooth":"auto")}var Zt=e.system(function(t){var n=t[0],o=n.totalCount,r=n.listRefresh,i=t[1],a=i.isAtBottom,l=i.atBottomState,s=t[2].scrollToIndex,u=t[3].scrolledToInitialItem,c=t[4],m=c.propsReady,d=c.didMount,f=t[5].log,p=t[6].scrollingInProgress,h=e.statefulStream(!1),g=null;function v(t){e.publish(s,{index:"LAST",align:"end",behavior:t})}return e.subscribe(e.pipe(e.combineLatest(e.pipe(e.duc(o),e.skip(1)),d),e.withLatestFrom(e.duc(h),a,u,p),e.map(function(t){var e=t[0],n=e[0],o=e[1]&&t[3],r="auto";return o&&(r=function(t,e){return"function"==typeof t?Yt(t(e)):e&&Yt(t)}(t[1],t[2]||t[4]),o=o&&!!r),{totalCount:n,shouldFollow:o,followOutputBehavior:r}}),e.filter(function(t){return t.shouldFollow})),function(t){var n=t.totalCount,o=t.followOutputBehavior;g&&(g(),g=null),g=e.handleNext(r,function(){e.getValue(f)("following output to ",{totalCount:n},P.DEBUG),v(o),g=null})}),e.subscribe(e.pipe(e.combineLatest(e.duc(h),o,m),e.filter(function(t){return t[0]&&t[2]}),e.scan(function(t,e){var n=e[1];return{refreshed:t.value===n,value:n}},{refreshed:!1,value:0}),e.filter(function(t){return t.refreshed}),e.withLatestFrom(h,o)),function(t){var n=t[1],o=e.handleNext(l,function(t){!n||t.atBottom||"SIZE_INCREASED"!==t.notAtBottomBecause||g||(e.getValue(f)("scrolling to bottom due to increased size",{},P.DEBUG),v("auto"))});setTimeout(o,100)}),e.subscribe(e.combineLatest(e.duc(h),l),function(t){var e=t[1];t[0]&&!e.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===e.notAtBottomBecause&&v("auto")}),{followOutput:h}},e.tup(Ct,N,wt,Kt,U,V,O));function qt(t){return t.reduce(function(t,e){return t.groupIndices.push(t.totalCount),t.totalCount+=e+1,t},{totalCount:0,groupIndices:[]})}var Jt=r(function(t){var e=t[0],n=e.totalCount,o=e.groupIndices,r=e.sizes,p=t[1],h=p.scrollTop,g=p.headerHeight,v=i(),S=i(),I=a(l(v,s(qt)));return u(l(I,s(c("totalCount"))),n),u(l(I,s(c("groupIndices"))),o),u(l(m(h,r,g),d(function(t){return St(t[1])}),s(function(t){return Z(t[1].groupOffsetTree,Math.max(t[0]-t[2],0),"v")[0]}),f(),s(function(t){return[t]})),S),{groupCounts:v,topItemsIndexes:S}},o(Ct,O)),$t={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0};function Qt(t,e,n){if(0===t.length)return[];if(!St(e))return t.map(function(t){return H({},t,{index:t.index+n,originalIndex:t.index})});for(var o,r=[],i=ot(e.groupOffsetTree,t[0].index,t[t.length-1].index),a=void 0,l=0,s=k(t);!(o=s()).done;){var u=o.value;(!a||a.end<u.index)&&(a=i.shift(),l=e.groupIndices.indexOf(a.start)),r.push(H({},u.index===a.start?{type:"group",index:l}:{index:u.index-(l+1)+n,groupIndex:l},{size:u.size,offset:u.offset,originalIndex:u.index,data:u.data}))}return r}function Xt(t,e,n,o,r){var i=0,a=0;if(t.length>0){i=t[0].offset;var l=t[t.length-1];a=l.offset+l.size}var s=i,u=o.lastOffset+(n-o.lastIndex)*o.lastSize-a;return{items:Qt(t,o,r),topItems:Qt(e,o,r),topListHeight:e.reduce(function(t,e){return e.size+t},0),offsetTop:i,offsetBottom:u,top:s,bottom:a,totalCount:n}}var te,ee,ne,oe=e.system(function(t){var n=t[0],o=n.sizes,r=n.totalCount,i=n.data,a=n.firstItemIndex,l=t[1],s=t[2],u=s.visibleRange,c=s.listBoundary,m=s.topListHeight,d=t[3],f=d.scrolledToInitialItem,p=d.initialTopMostItemIndex,h=t[4].topListHeight,g=t[5],v=t[6].didMount,S=e.statefulStream([]),I=e.stream();e.connect(l.topItemsIndexes,S);var C=e.statefulStreamFromEmitter(e.pipe(e.combineLatest(v,e.duc(u),e.duc(r),e.duc(o),e.duc(p),f,e.duc(S),e.duc(a),i),e.filter(function(t){return t[0]}),e.map(function(t){var n=t[1],o=n[0],r=n[1],i=t[2],a=t[4],l=t[5],s=t[6],u=t[7],c=t[8],m=t[3],d=m.sizeTree,f=m.offsetTree;if(0===i||0===o&&0===r)return $t;if(j(d))return Xt(function(t,e,n){if(St(e)){var o=vt(t,e);return[{index:Z(e.groupOffsetTree,o)[0],size:0,offset:0},{index:o,size:0,offset:0,data:n&&n[0]}]}return[{index:t,size:0,offset:0,data:n&&n[0]}]}(function(t,e){return"number"==typeof t?t:"LAST"===t.index?e-1:t.index}(a,i),m,c),[],i,m,u);var p=[];if(s.length>0)for(var h,g=s[0],v=s[s.length-1],S=0,I=k(ot(d,g,v));!(h=I()).done;)for(var C=h.value,x=C.value,T=Math.max(C.start,g),w=Math.min(C.end,v),y=T;y<=w;y++)p.push({index:y,size:x,offset:S,data:c&&c[y]}),S+=x;if(!l)return Xt([],p,i,m,u);var b=s.length>0?s[s.length-1]+1:0,E=function(t,e,n,o){return void 0===o&&(o=0),o>0&&(e=Math.max(e,st(t,o,mt).offset)),rt((i=n,l=lt(r=t,e,a=dt),s=lt(r,i,a,l),r.slice(l,s+1)),ft);var r,i,a,l,s}(f,o,r,b);if(0===E.length)return null;var H=i-1;return Xt(e.tap([],function(t){for(var e,n=k(E);!(e=n()).done;){var i=e.value,a=i.value,l=a.offset,s=i.start,u=a.size;a.offset<o&&(l+=((s+=Math.floor((o-a.offset)/u))-i.start)*u),s<b&&(l+=(b-s)*u,s=b);for(var m=Math.min(i.end,H),d=s;d<=m&&!(l>=r);d++)t.push({index:d,size:u,offset:l,data:c&&c[d]}),l+=u}}),p,i,m,u)}),e.filter(function(t){return null!==t}),e.distinctUntilChanged()),$t);return e.connect(e.pipe(i,e.filter(function(t){return void 0!==t}),e.map(function(t){return t.length})),r),e.connect(e.pipe(C,e.map(e.prop("topListHeight"))),h),e.connect(h,m),e.connect(e.pipe(C,e.map(function(t){return[t.top,t.bottom]})),c),e.connect(e.pipe(C,e.map(function(t){return t.items})),I),H({listState:C,topItemsIndexes:S,endReached:e.streamFromEmitter(e.pipe(C,e.filter(function(t){return t.items.length>0}),e.withLatestFrom(r,i),e.filter(function(t){var e=t[0].items;return e[e.length-1].originalIndex===t[1]-1}),e.map(function(t){return[t[1]-1,t[2]]}),e.distinctUntilChanged(z),e.map(function(t){return t[0]}))),startReached:e.streamFromEmitter(e.pipe(C,e.throttleTime(200),e.filter(function(t){var e=t.items;return e.length>0&&e[0].originalIndex===t.topItems.length}),e.map(function(t){return t.items[0].index}),e.distinctUntilChanged())),rangeChanged:e.streamFromEmitter(e.pipe(C,e.filter(function(t){return t.items.length>0}),e.map(function(t){var e=t.items;return{startIndex:e[0].index,endIndex:e[e.length-1].index}}),e.distinctUntilChanged(B))),itemsRendered:I},g)},e.tup(Ct,Jt,Et,Kt,wt,N,U),{singleton:!0}),re=e.system(function(t){var n=t[0],o=n.sizes,r=n.firstItemIndex,i=n.data,a=t[1].listState,l=t[2].didMount,s=e.statefulStream(0);return e.connect(e.pipe(l,e.withLatestFrom(s),e.filter(function(t){return 0!==t[1]}),e.withLatestFrom(o,r,i),e.map(function(t){var e=t[0][1],n=t[1],o=t[2],r=t[3],i=void 0===r?[]:r,a=0;if(n.groupIndices.length>0)for(var l,s=k(n.groupIndices);!((l=s()).done||l.value-a>=e);)a++;var u=e+a;return Xt(Array.from({length:u}).map(function(t,e){return{index:e,size:0,offset:0,data:i[e]}}),[],u,n,o)})),a),{initialItemCount:s}},e.tup(Ct,oe,U),{singleton:!0}),ie=r(function(t){var e=t[0].topItemsIndexes,n=p(0);return u(l(n,d(function(t){return t>0}),s(function(t){return Array.from({length:t}).map(function(t,e){return e})})),e),{topItemCount:n}},o(oe)),ae=e.system(function(t){var n=t[0],o=n.footerHeight,r=n.headerHeight,i=t[1].listState,a=e.stream(),l=e.statefulStreamFromEmitter(e.pipe(e.combineLatest(o,r,i),e.map(function(t){var e=t[2];return t[0]+t[1]+e.offsetBottom+e.bottom})),0);return e.connect(e.duc(l),a),{totalListHeight:l,totalListHeightChanged:a}},e.tup(O,oe),{singleton:!0}),le=e.system(function(t){var n=t[0],o=n.scrollBy,r=n.scrollTop,i=n.deviation,a=n.scrollingInProgress,l=t[1],s=l.isScrolling,u=l.isAtBottom,c=l.atBottomState,m=l.scrollDirection,d=t[3],f=d.beforeUnshiftWith,p=d.shiftWithOffset,h=d.sizes,g=t[4].log,v=e.streamFromEmitter(e.pipe(t[2].listState,e.withLatestFrom(l.lastJumpDueToItemResize),e.scan(function(t,e){var n=t[1],o=e[0],r=o.items,i=o.totalCount,a=e[1],l=0;if(t[2]===i){if(n.length>0&&r.length>0){var s=1===r.length;if(0!==r[0].originalIndex||0!==n[0].originalIndex)for(var u=function(t){var e=r[t],o=n.find(function(t){return t.originalIndex===e.originalIndex});return o?e.offset!==o.offset||s?(l=e.offset-o.offset+e.size-o.size,"break"):void 0:"continue"},c=r.length-1;c>=0;c--){var m=u(c);if("continue"!==m&&"break"===m)break}}0!==l&&(l+=a)}return[l,r,i]},[0,[],0]),e.filter(function(t){return 0!==t[0]}),e.withLatestFrom(r,m,a,g,u,c),e.filter(function(t){return!t[3]&&0!==t[1]&&t[2]===A}),e.map(function(t){var e=t[0][0];return(0,t[4])("Upward scrolling compensation",{amount:e},P.DEBUG),e})));return e.connect(e.pipe(v,e.withLatestFrom(i),e.map(function(t){return t[1]-t[0]})),i),e.subscribe(e.pipe(e.combineLatest(e.statefulStreamFromEmitter(s,!1),i),e.filter(function(t){return!t[0]&&0!==t[1]}),e.map(function(t){return t[1]}),e.throttleTime(1)),function(t){t>0?(e.publish(o,{top:-t,behavior:"auto"}),e.publish(i,0)):(e.publish(i,0),e.publish(o,{top:-t,behavior:"auto"}))}),e.connect(e.pipe(p,e.map(function(t){return{top:-t}})),o),e.connect(e.pipe(f,e.withLatestFrom(h),e.map(function(t){return t[0]*t[1].lastSize})),v),{deviation:i}},e.tup(O,N,oe,Ct,V)),se=e.system(function(t){var n=t[0].totalListHeight,o=t[1].didMount,r=t[2].scrollTo,i=e.statefulStream(0);return e.subscribe(e.pipe(o,e.withLatestFrom(i),e.filter(function(t){return 0!==t[1]}),e.map(function(t){return{top:t[1]}})),function(t){e.handleNext(e.pipe(n,e.filter(function(t){return 0!==t})),function(){setTimeout(function(){e.publish(r,t)})})}),{initialScrollTop:i}},e.tup(ae,U,O),{singleton:!0}),ue=e.system(function(t){var n=t[0].viewportHeight,o=t[1].totalListHeight,r=e.statefulStream(!1);return{alignToBottom:r,paddingTopAddition:e.statefulStreamFromEmitter(e.pipe(e.combineLatest(r,n,o),e.filter(function(t){return t[0]}),e.map(function(t){return Math.max(0,t[1]-t[2])}),e.distinctUntilChanged()),0)}},e.tup(O,ae),{singleton:!0}),ce=e.system(function(t){var n=t[0],o=n.sizes,r=n.totalCount,i=t[1],a=i.scrollTop,l=i.viewportHeight,s=i.headerHeight,u=i.scrollingInProgress,c=t[2].scrollToIndex,m=e.stream();return e.connect(e.pipe(m,e.withLatestFrom(o,l,r,s,a),e.map(function(t){var n=t[0],o=n.index,r=n.behavior,i=void 0===r?"auto":r,a=n.done,l=t[1],s=t[2],c=t[4],m=t[5],d=t[3]-1,f=null;o=vt(o,l);var p=gt(o=Math.max(0,o,Math.min(d,o)),l.offsetTree)+c;return p<m?f={index:o,behavior:i,align:"start"}:p+Z(l.sizeTree,o)[1]>m+s&&(f={index:o,behavior:i,align:"end"}),f?a&&e.handleNext(e.pipe(u,e.skip(1),e.filter(function(t){return!1===t})),a):a&&a(),f}),e.filter(function(t){return null!==t})),c),{scrollIntoView:m}},e.tup(Ct,O,wt,oe,V),{singleton:!0}),me=["listState","topItemsIndexes"],de=e.system(function(t){return H({},t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},e.tup(Et,re,U,D,ae,se,ue,Ht,ce)),fe=e.system(function(t){var n=t[0],o=n.totalCount,r=n.sizeRanges,i=n.fixedItemSize,a=n.defaultItemSize,l=n.trackItemSizes,s=n.itemSize,u=n.data,c=n.firstItemIndex,m=n.groupIndices,d=n.statefulTotalCount,f=t[1],p=f.initialTopMostItemIndex,h=f.scrolledToInitialItem,g=t[2],v=t[3],S=t[4],I=S.listState,C=S.topItemsIndexes,x=R(S,me),T=t[5].scrollToIndex,w=t[7].topItemCount,y=t[8].groupCounts,b=t[9],E=t[10];return e.connect(x.rangeChanged,b.scrollSeekRangeChanged),e.connect(e.pipe(b.windowViewportRect,e.map(e.prop("visibleHeight"))),g.viewportHeight),H({totalCount:o,data:u,firstItemIndex:c,sizeRanges:r,initialTopMostItemIndex:p,scrolledToInitialItem:h,topItemsIndexes:C,topItemCount:w,groupCounts:y,fixedItemHeight:i,defaultItemHeight:a},v,{statefulTotalCount:d,listState:I,scrollToIndex:T,trackItemSizes:l,itemSize:s,groupIndices:m},x,b,g,E)},e.tup(Ct,Kt,O,Zt,oe,wt,le,ie,Jt,de,V)),pe=(te=function(){if("undefined"==typeof document)return"sticky";var t=document.createElement("div");return t.style.position="-webkit-sticky","-webkit-sticky"===t.style.position?"-webkit-sticky":"sticky"},ne=!1,function(){return ne||(ne=!0,ee=te()),ee}),he=["placeholder"],ge=["style","children"],ve=["style","children"];function Se(t){return t}var Ie=r(function(){var t=p(function(t){return"Item "+t}),e=p(null),n=p(function(t){return"Group "+t}),o=p({}),r=p(Se),i=p("div"),a=p(h),u=function(t,e){return void 0===e&&(e=null),S(l(o,s(function(e){return e[t]}),f()),e)};return{context:e,itemContent:t,groupContent:n,components:o,computeItemKey:r,headerFooterTag:i,scrollerRef:a,FooterComponent:u("Footer"),HeaderComponent:u("Header"),TopItemListComponent:u("TopItemList"),ListComponent:u("List","div"),ItemComponent:u("Item","div"),GroupComponent:u("Group","div"),ScrollerComponent:u("Scroller","div"),EmptyPlaceholder:u("EmptyPlaceholder"),ScrollSeekPlaceholder:u("ScrollSeekPlaceholder")}});function Ce(t,e){var n=i();return g(n,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+e,"color: red;","color: inherit;","color: blue;")}),u(n,t),n}var xe=r(function(t){var e=t[0],o=t[1],r={item:Ce(o.itemContent,"Rename the %citem%c prop to %citemContent."),group:Ce(o.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Ce(e.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Ce(e.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Ce(e.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:i(),maxHeightCacheSize:i(),footer:i(),header:i(),HeaderContainer:i(),FooterContainer:i(),ItemContainer:i(),ScrollContainer:i(),GroupContainer:i(),ListContainer:i(),emptyComponent:i(),scrollSeek:i()};function a(t,e,n){u(l(t,I(o.components),s(function(t){var o,r=t[0],i=t[1];return console.warn("react-virtuoso: "+n+" property is deprecated. Pass components."+e+" instead."),H({},i,((o={})[e]=r,o))})),o.components)}return g(r.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),g(r.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),g(r.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),g(r.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),g(r.scrollSeek,function(t){var r=t.placeholder,i=R(t,he);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),v(o.components,H({},n(o.components),{ScrollSeekPlaceholder:r})),v(e.scrollSeekConfiguration,i)}),a(r.footer,"Footer","footer"),a(r.header,"Header","header"),a(r.ItemContainer,"Item","ItemContainer"),a(r.ListContainer,"List","ListContainer"),a(r.ScrollContainer,"Scroller","ScrollContainer"),a(r.emptyComponent,"EmptyPlaceholder","emptyComponent"),a(r.GroupContainer,"Group","GroupContainer"),H({},e,o,r)},o(fe,Ie)),Te=function(t){return x.createElement("div",{style:{height:t.height}})},we={position:pe(),zIndex:1,overflowAnchor:"none"},ye=x.memo(function(t){var e=t.showTopList,n=void 0!==e&&e,o=Ae("listState"),r=Ae("deviation"),i=Ue("sizeRanges"),a=Ae("useWindowScroll"),l=Ae("customScrollParent"),s=Ue("windowScrollContainerState"),u=Ue("scrollContainerState"),c=l||a?s:u,m=Ae("itemContent"),d=Ae("context"),f=Ae("groupContent"),p=Ae("trackItemSizes"),g=Ae("itemSize"),v=Ae("log"),S=_t(i,g,p,n?h:c,v,l),I=Ae("EmptyPlaceholder"),C=Ae("ScrollSeekPlaceholder")||Te,x=Ae("ListComponent"),T=Ae("ItemComponent"),w=Ae("GroupComponent"),y=Ae("computeItemKey"),b=Ae("isSeeking"),R=Ae("groupIndices").length>0,L=Ae("paddingTopAddition"),k=Ae("firstItemIndex"),z=Ae("statefulTotalCount"),B=n?{}:{boxSizing:"border-box",paddingTop:o.offsetTop+L,paddingBottom:o.offsetBottom,marginTop:r};return!n&&0===z&&I?E(I,Re(I,d)):E(x,H({},Re(x,d),{ref:S,style:B,"data-test-id":n?"virtuoso-top-item-list":"virtuoso-item-list"}),(n?o.topItems:o.items).map(function(t){var e=t.originalIndex,n=y(e+k,t.data,d);return b?E(C,H({},Re(C,d),{key:n,index:t.index,height:t.size,type:t.type||"item"},"group"===t.type?{}:{groupIndex:t.groupIndex})):"group"===t.type?E(w,H({},Re(w,d),{key:n,"data-index":e,"data-known-size":t.size,"data-item-index":t.index,style:we}),f(t.index)):E(T,H({},Re(T,d),{key:n,"data-index":e,"data-known-size":t.size,"data-item-index":t.index,"data-item-group-index":t.groupIndex,style:{overflowAnchor:"none"}}),R?m(t.index,t.groupIndex,t.data,d):m(t.index,t.data,d))}))}),be={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},Ee={width:"100%",height:"100%",position:"absolute",top:0},He={width:"100%",position:pe(),top:0};function Re(t,e){if("string"!=typeof t)return{context:e}}var Le=x.memo(function(){var t=Ae("HeaderComponent"),e=Ue("headerHeight"),n=Ae("headerFooterTag"),o=Nt(function(t){return e(ut(t,"height"))}),r=Ae("context");return t?E(n,{ref:o},E(t,Re(t,r))):null}),ke=x.memo(function(){var t=Ae("FooterComponent"),e=Ue("footerHeight"),n=Ae("headerFooterTag"),o=Nt(function(t){return e(ut(t,"height"))}),r=Ae("context");return t?E(n,{ref:o},E(t,Re(t,r))):null});function ze(t){var e=t.usePublisher,n=t.useEmitter,o=t.useEmitterValue;return x.memo(function(t){var r=t.style,i=t.children,a=R(t,ge),l=e("scrollContainerState"),s=o("ScrollerComponent"),u=e("smoothScrollTargetReached"),c=o("scrollerRef"),m=o("context"),d=jt(l,u,s,c),f=d.scrollerRef,p=d.scrollByCallback;return n("scrollTo",d.scrollToCallback),n("scrollBy",p),E(s,H({ref:f,style:H({},be,r),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},a,Re(s,m)),i)})}function Be(t){var e=t.usePublisher,n=t.useEmitter,o=t.useEmitterValue;return x.memo(function(t){var r=t.style,i=t.children,a=R(t,ve),l=e("windowScrollContainerState"),s=o("ScrollerComponent"),u=e("smoothScrollTargetReached"),c=o("totalListHeight"),m=o("deviation"),d=o("customScrollParent"),f=o("context"),p=jt(l,u,s,h,d),g=p.scrollerRef,v=p.scrollByCallback,S=p.scrollToCallback;return Gt(function(){return g.current=d||window,function(){g.current=null}},[g,d]),n("windowScrollTo",S),n("scrollBy",v),E(s,H({style:H({position:"relative"},r,0!==c?{height:c+m}:{}),"data-virtuoso-scroller":!0},a,Re(s,f)),i)})}var Fe=function(t){var e=t.children,n=Ue("viewportHeight"),o=Nt(C(n,function(t){return ut(t,"height")}));return x.createElement("div",{style:Ee,ref:o,"data-viewport-type":"element"},e)},Pe=function(t){var e=t.children,n=Dt(Ue("windowViewportRect"),Ae("customScrollParent"));return x.createElement("div",{ref:n,style:Ee,"data-viewport-type":"window"},e)},Oe=function(t){var e=t.children,n=Ae("TopItemListComponent"),o=Ae("headerHeight"),r=H({},He,{marginTop:o+"px"}),i=Ae("context");return E(n||"div",{style:r,context:i},e)},Me=t(xe,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},x.memo(function(t){var e=Ae("useWindowScroll"),n=Ae("topItemsIndexes").length>0,o=Ae("customScrollParent"),r=o||e?Pe:Fe;return x.createElement(o||e?De:Ne,H({},t),x.createElement(r,null,x.createElement(Le,null),x.createElement(ye,null),x.createElement(ke,null)),n&&x.createElement(Oe,null,x.createElement(ye,{showTopList:!0})))})),Ve=Me.Component,Ue=Me.usePublisher,Ae=Me.useEmitterValue,We=Me.useEmitter,Ne=ze({usePublisher:Ue,useEmitterValue:Ae,useEmitter:We}),De=Be({usePublisher:Ue,useEmitterValue:Ae,useEmitter:We}),Ge=["placeholder"],_e=e.system(function(){var t=e.statefulStream(function(t){return"Item "+t}),n=e.statefulStream({}),o=e.statefulStream(null),r=e.statefulStream("virtuoso-grid-item"),i=e.statefulStream("virtuoso-grid-list"),a=e.statefulStream(Se),l=e.statefulStream(e.noop),s=function(t,o){return void 0===o&&(o=null),e.statefulStreamFromEmitter(e.pipe(n,e.map(function(e){return e[t]}),e.distinctUntilChanged()),o)};return{context:o,itemContent:t,components:n,computeItemKey:a,itemClassName:r,listClassName:i,scrollerRef:l,ListComponent:s("List","div"),ItemComponent:s("Item","div"),ScrollerComponent:s("Scroller","div"),ScrollSeekPlaceholder:s("ScrollSeekPlaceholder","div")}}),je=e.system(function(t){var n=t[0],o=t[1],r={item:Ce(o.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:e.stream(),ScrollContainer:e.stream(),ListContainer:e.stream(),emptyComponent:e.stream(),scrollSeek:e.stream()};function i(t,n,r){e.connect(e.pipe(t,e.withLatestFrom(o.components),e.map(function(t){var e,o=t[0],i=t[1];return console.warn("react-virtuoso: "+r+" property is deprecated. Pass components."+n+" instead."),H({},i,((e={})[n]=o,e))})),o.components)}return e.subscribe(r.scrollSeek,function(t){var r=t.placeholder,i=R(t,Ge);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),e.publish(o.components,H({},e.getValue(o.components),{ScrollSeekPlaceholder:r})),e.publish(n.scrollSeekConfiguration,i)}),i(r.ItemContainer,"Item","ItemContainer"),i(r.ListContainer,"List","ListContainer"),i(r.ScrollContainer,"Scroller","ScrollContainer"),H({},n,o,r)},e.tup(Mt,_e)),Ke=x.memo(function(){var t=Qe("gridState"),e=Qe("listClassName"),n=Qe("itemClassName"),o=Qe("itemContent"),r=Qe("computeItemKey"),i=Qe("isSeeking"),a=$e("scrollHeight"),l=Qe("ItemComponent"),s=Qe("ListComponent"),u=Qe("ScrollSeekPlaceholder"),c=Qe("context"),m=$e("itemDimensions"),d=Nt(function(t){a(t.parentElement.parentElement.scrollHeight);var e=t.firstChild;e&&m(e.getBoundingClientRect())});return E(s,H({ref:d,className:e},Re(s,c),{style:{paddingTop:t.offsetTop,paddingBottom:t.offsetBottom}}),t.items.map(function(e){var a=r(e.index);return i?E(u,H({key:a},Re(u,c),{index:e.index,height:t.itemHeight,width:t.itemWidth})):E(l,H({},Re(l,c),{className:n,"data-index":e.index,key:a}),o(e.index,c))}))}),Ye=function(t){var e=t.children,n=$e("viewportDimensions"),o=Nt(function(t){n(t.getBoundingClientRect())});return x.createElement("div",{style:Ee,ref:o},e)},Ze=function(t){var e=t.children,n=Dt($e("windowViewportRect"),Qe("customScrollParent"));return x.createElement("div",{ref:n,style:Ee},e)},qe=t(je,{optional:{totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},x.memo(function(t){var e=H({},t),n=Qe("useWindowScroll"),o=Qe("customScrollParent"),r=o||n?Ze:Ye;return x.createElement(o||n?en:tn,H({},e),x.createElement(r,null,x.createElement(Ke,null)))})),Je=qe.Component,$e=qe.usePublisher,Qe=qe.useEmitterValue,Xe=qe.useEmitter,tn=ze({usePublisher:$e,useEmitterValue:Qe,useEmitter:Xe}),en=Be({usePublisher:$e,useEmitterValue:Qe,useEmitter:Xe}),nn=r(function(){var t=p(function(t){return x.createElement("td",null,"Item $",t)}),e=p(null),n=p(null),o=p({}),r=p(Se),i=p(h),a=function(t,e){return void 0===e&&(e=null),S(l(o,s(function(e){return e[t]}),f()),e)};return{context:e,itemContent:t,fixedHeaderContent:n,components:o,computeItemKey:r,scrollerRef:i,TableComponent:a("Table","table"),TableHeadComponent:a("TableHead","thead"),TableBodyComponent:a("TableBody","tbody"),TableRowComponent:a("TableRow","tr"),ScrollerComponent:a("Scroller","div"),EmptyPlaceholder:a("EmptyPlaceholder"),ScrollSeekPlaceholder:a("ScrollSeekPlaceholder")}}),on=r(function(t){return H({},t[0],t[1])},o(fe,nn)),rn=function(t){return x.createElement("tr",null,x.createElement("td",{style:{height:t.height}}))},an=function(t){return x.createElement("tr",null,x.createElement("td",{style:{height:t.height,padding:0,border:0}}))},ln=x.memo(function(){var t=fn("listState"),e=fn("deviation"),n=dn("sizeRanges"),o=fn("useWindowScroll"),r=fn("customScrollParent"),i=dn("windowScrollContainerState"),a=dn("scrollContainerState"),l=r||o?i:a,s=fn("itemContent"),u=fn("trackItemSizes"),c=_t(n,fn("itemSize"),u,l,fn("log"),r),m=fn("EmptyPlaceholder"),d=fn("ScrollSeekPlaceholder")||rn,f=fn("TableBodyComponent"),p=fn("TableRowComponent"),h=fn("computeItemKey"),g=fn("isSeeking"),v=fn("paddingTopAddition"),S=fn("firstItemIndex"),I=fn("statefulTotalCount"),C=fn("context");if(0===I&&m)return E(m,Re(m,C));var T=t.offsetTop+v+e,w=t.offsetBottom,y=T>0?x.createElement(an,{height:T,key:"padding-top"}):null,b=w>0?x.createElement(an,{height:w,key:"padding-bottom"}):null,R=t.items.map(function(t){var e=t.originalIndex,n=h(e+S,t.data,C);return g?E(d,H({},Re(d,C),{key:n,index:t.index,height:t.size,type:t.type||"item"})):E(p,H({},Re(p,C),{key:n,"data-index":e,"data-known-size":t.size,"data-item-index":t.index,style:{overflowAnchor:"none"}}),s(t.index,t.data,C))});return E(f,H({ref:c,"data-test-id":"virtuoso-item-list"},Re(f,C)),[y].concat(R,[b]))}),sn=function(t){var e=t.children,n=dn("viewportHeight"),o=Nt(C(n,function(t){return ut(t,"height")}));return x.createElement("div",{style:Ee,ref:o,"data-viewport-type":"element"},e)},un=function(t){var e=t.children,n=Dt(dn("windowViewportRect"),fn("customScrollParent"));return x.createElement("div",{ref:n,style:Ee,"data-viewport-type":"window"},e)},cn=t(on,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},x.memo(function(t){var e=fn("useWindowScroll"),n=fn("customScrollParent"),o=dn("fixedHeaderHeight"),r=fn("fixedHeaderContent"),i=fn("context"),a=Nt(C(o,function(t){return ut(t,"height")})),l=n||e?gn:hn,s=n||e?un:sn,u=fn("TableComponent"),c=fn("TableHeadComponent"),m=r?x.createElement(c,H({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:a},Re(c,i)),r()):null;return x.createElement(l,H({},t),x.createElement(s,null,x.createElement(u,H({style:{borderSpacing:0}},Re(u,i)),[m,x.createElement(ln,{key:"TableBody"})])))})),mn=cn.Component,dn=cn.usePublisher,fn=cn.useEmitterValue,pn=cn.useEmitter,hn=ze({usePublisher:dn,useEmitterValue:fn,useEmitter:pn}),gn=Be({usePublisher:dn,useEmitterValue:fn,useEmitter:pn}),vn=Ve,Sn=Ve,In=mn,Cn=Je;export{Sn as GroupedVirtuoso,P as LogLevel,In as TableVirtuoso,vn as Virtuoso,Cn as VirtuosoGrid};
//# sourceMappingURL=index.m.js.map
