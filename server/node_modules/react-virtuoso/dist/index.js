"use strict";var e=require("@virtuoso.dev/react-urx"),t=require("@virtuoso.dev/urx"),n=require("react");function r(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach(function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}}),t.default=e,t}var o=r(t),i=r(n);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function l(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(o[n]=e[n]);return o}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(n)return(n=n.call(e)).next.bind(n);if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e,t){return!(!e||e[0]!==t[0]||e[1]!==t[1])}function m(e,t){return!(!e||e.startIndex!==t.startIndex||e.endIndex!==t.endIndex)}var d,f,p=o.system(function(){var e=o.stream(),t=o.stream(),n=o.statefulStream(0),r=o.stream(),i=o.statefulStream(0),a=o.stream(),l=o.stream(),s=o.statefulStream(0),u=o.statefulStream(0),c=o.stream(),m=o.stream(),d=o.statefulStream(!1);return o.connect(o.pipe(e,o.map(function(e){return e[0]})),t),o.connect(o.pipe(e,o.map(function(e){return e[1]})),l),o.connect(t,i),{scrollContainerState:e,scrollTop:t,viewportHeight:a,headerHeight:s,footerHeight:u,scrollHeight:l,smoothScrollTargetReached:r,scrollTo:c,scrollBy:m,statefulScrollTop:i,deviation:n,scrollingInProgress:d}},[],{singleton:!0});exports.LogLevel=void 0,(f=exports.LogLevel||(exports.LogLevel={}))[f.DEBUG=0]="DEBUG",f[f.INFO=1]="INFO",f[f.WARN=2]="WARN",f[f.ERROR=3]="ERROR";var h=((d={})[exports.LogLevel.DEBUG]="debug",d[exports.LogLevel.INFO]="log",d[exports.LogLevel.WARN]="warn",d[exports.LogLevel.ERROR]="error",d),g=o.system(function(){var e=o.statefulStream(exports.LogLevel.ERROR);return{log:o.statefulStream(function(t,n,r){var i;void 0===r&&(r=exports.LogLevel.INFO),r>=(null!=(i=("undefined"==typeof globalThis?window:globalThis).VIRTUOSO_LOG_LEVEL)?i:o.getValue(e))&&console[h[r]]("%creact-virtuoso: %c%s %o","color: #0253b3; font-weight: bold","color: initial",t,n)}),logLevel:e}},[],{singleton:!0}),v=o.system(function(e){var n=e[0].log,r=o.statefulStream(!1),i=o.streamFromEmitter(o.pipe(r,o.filter(function(e){return e}),o.distinctUntilChanged()));return o.subscribe(r,function(e){e&&t.getValue(n)("props updated",{},exports.LogLevel.DEBUG)}),{propsReady:r,didMount:i}},t.tup(g),{singleton:!0}),S="up",C={atBottom:!1,notAtBottomBecause:"NOT_SHOWING_LAST_ITEM",state:{offsetBottom:0,scrollTop:0,viewportHeight:0,scrollHeight:0}},I=o.system(function(e){var t=e[0],n=t.scrollContainerState,r=t.scrollTop,i=t.viewportHeight,a=t.headerHeight,l=t.footerHeight,s=t.scrollBy,u=o.statefulStream(!1),c=o.statefulStream(!0),m=o.stream(),d=o.stream(),f=o.statefulStream(4),p=o.streamFromEmitter(o.pipe(o.merge(o.pipe(o.duc(r),o.skip(1),o.mapTo(!0)),o.pipe(o.duc(r),o.skip(1),o.mapTo(!1),o.debounceTime(100))),o.distinctUntilChanged())),h=o.statefulStreamFromEmitter(o.pipe(o.merge(o.pipe(s,o.mapTo(!0)),o.pipe(s,o.mapTo(!1),o.debounceTime(200))),o.distinctUntilChanged()),!1);o.connect(o.pipe(o.duc(r),o.map(function(e){return 0===e}),o.distinctUntilChanged()),c),o.connect(c,d);var g=o.streamFromEmitter(o.pipe(o.combineLatest(n,o.duc(i),o.duc(a),o.duc(l),o.duc(f)),o.scan(function(e,t){var n,r,o=t[0],i=o[0],a=o[1],l=t[1],s={viewportHeight:l,scrollTop:i,scrollHeight:a};return i+l-a>-t[4]?(i>e.state.scrollTop?(n="SCROLLED_DOWN",r=e.state.scrollTop-i):(n="SIZE_DECREASED",r=e.state.scrollTop-i||e.scrollTopDelta),{atBottom:!0,state:s,atBottomBecause:n,scrollTopDelta:r}):{atBottom:!1,notAtBottomBecause:s.scrollHeight>e.state.scrollHeight?"SIZE_INCREASED":l<e.state.viewportHeight?"VIEWPORT_HEIGHT_DECREASING":i<e.state.scrollTop?"SCROLLING_UPWARDS":"NOT_FULLY_SCROLLED_TO_LAST_ITEM_BOTTOM",state:s}},C),o.distinctUntilChanged(function(e,t){return e&&e.atBottom===t.atBottom}))),v=o.statefulStreamFromEmitter(o.pipe(n,o.scan(function(e,t){var n=t[0],r=t[1];return e.scrollHeight!==r?e.scrollTop!==n?{scrollHeight:r,scrollTop:n,jump:e.scrollTop-n,changed:!0}:{scrollHeight:r,scrollTop:n,jump:0,changed:!0}:{scrollTop:n,scrollHeight:r,jump:0,changed:!1}},{scrollHeight:0,jump:0,scrollTop:0,changed:!1}),o.filter(function(e){return e.changed}),o.map(function(e){return e.jump})),0);o.connect(o.pipe(g,o.map(function(e){return e.atBottom})),u),o.connect(o.pipe(u,o.throttleTime(50)),m);var I=o.statefulStream("down");o.connect(o.pipe(n,o.map(function(e){return e[0]}),o.distinctUntilChanged(),o.scan(function(e,t){return o.getValue(h)?{direction:e.direction,prevScrollTop:t}:{direction:t<e.prevScrollTop?S:"down",prevScrollTop:t}},{direction:"down",prevScrollTop:0}),o.map(function(e){return e.direction})),I),o.connect(o.pipe(n,o.throttleTime(50),o.mapTo("none")),I);var x=o.statefulStream(0);return o.connect(o.pipe(p,o.filter(function(e){return!e}),o.mapTo(0)),x),o.connect(o.pipe(r,o.throttleTime(100),o.withLatestFrom(p),o.filter(function(e){return!!e[1]}),o.scan(function(e,t){return[e[1],t[0]]},[0,0]),o.map(function(e){return e[1]-e[0]})),x),{isScrolling:p,isAtTop:c,isAtBottom:u,atBottomState:g,atTopStateChange:d,atBottomStateChange:m,scrollDirection:I,atBottomThreshold:f,scrollVelocity:x,lastJumpDueToItemResize:v}},o.tup(p)),x=o.system(function(e){var t=e[0].scrollVelocity,n=o.statefulStream(!1),r=o.stream(),i=o.statefulStream(!1);return o.connect(o.pipe(t,o.withLatestFrom(i,n,r),o.filter(function(e){return!!e[1]}),o.map(function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=n.enter;if(r){if((0,n.exit)(t,o))return!1}else if(i(t,o))return!0;return r}),o.distinctUntilChanged()),n),o.subscribe(o.pipe(o.combineLatest(n,t,r),o.withLatestFrom(i)),function(e){var t=e[0],n=e[1];return t[0]&&n&&n.change&&n.change(t[1],t[2])}),{isSeeking:n,scrollSeekConfiguration:i,scrollVelocity:t,scrollSeekRangeChanged:r}},o.tup(I),{singleton:!0}),T={lvl:0};function w(e,t,n,r,o){return void 0===r&&(r=T),void 0===o&&(o=T),{k:e,v:t,lvl:n,l:r,r:o}}function y(e){return e===T}function b(){return T}function E(e,t){if(y(e))return T;var n=e.k,r=e.l,o=e.r;if(t===n){if(y(r))return o;if(y(o))return r;var i=z(r);return O(F(e,{k:i[0],v:i[1],l:B(r)}))}return O(F(e,t<n?{l:E(r,t)}:{r:E(o,t)}))}function L(e,t,n){if(void 0===n&&(n="k"),y(e))return[-Infinity,void 0];if(e[n]===t)return[e.k,e.v];if(e[n]<t){var r=L(e.r,t,n);return-Infinity===r[0]?[e.k,e.v]:r}return L(e.l,t,n)}function H(e,t,n){return y(e)?w(t,n,1):t===e.k?F(e,{k:t,v:n}):function(e){return U(A(e))}(F(e,t<e.k?{l:H(e.l,t,n)}:{r:H(e.r,t,n)}))}function R(e,t,n){if(y(e))return[];var r=e.k,o=e.v,i=e.r,a=[];return r>t&&(a=a.concat(R(e.l,t,n))),r>=t&&r<=n&&a.push({k:r,v:o}),r<=n&&(a=a.concat(R(i,t,n))),a}function k(e){return y(e)?[]:[].concat(k(e.l),[{k:e.k,v:e.v}],k(e.r))}function z(e){return y(e.r)?[e.k,e.v]:z(e.r)}function B(e){return y(e.r)?e.l:O(F(e,{r:B(e.r)}))}function F(e,t){return w(void 0!==t.k?t.k:e.k,void 0!==t.v?t.v:e.v,void 0!==t.lvl?t.lvl:e.lvl,void 0!==t.l?t.l:e.l,void 0!==t.r?t.r:e.r)}function P(e){return y(e)||e.lvl>e.r.lvl}function O(e){var t=e.l,n=e.r,r=e.lvl;if(n.lvl>=r-1&&t.lvl>=r-1)return e;if(r>n.lvl+1){if(P(t))return A(F(e,{lvl:r-1}));if(y(t)||y(t.r))throw new Error("Unexpected empty nodes");return F(t.r,{l:F(t,{r:t.r.l}),r:F(e,{l:t.r.r,lvl:r-1}),lvl:r})}if(P(e))return U(F(e,{lvl:r-1}));if(y(n)||y(n.l))throw new Error("Unexpected empty nodes");var o=n.l,i=P(o)?n.lvl-1:n.lvl;return F(o,{l:F(e,{r:o.l,lvl:r-1}),r:U(F(n,{l:o.r,lvl:i})),lvl:o.lvl+1})}function M(e,t,n){return y(e)?[]:V(R(e,L(e,t)[0],n),function(e){return{index:e.k,value:e.v}})}function V(e,t){var n=e.length;if(0===n)return[];for(var r=t(e[0]),o=r.index,i=r.value,a=[],l=1;l<n;l++){var s=t(e[l]),u=s.index,c=s.value;a.push({start:o,end:u-1,value:i}),o=u,i=c}return a.push({start:o,end:Infinity,value:i}),a}function U(e){var t=e.r,n=e.lvl;return y(t)||y(t.r)||t.lvl!==n||t.r.lvl!==n?e:F(t,{l:F(e,{r:t.l}),lvl:n+1})}function A(e){var t=e.l;return y(t)||t.lvl!==e.lvl?e:F(t,{r:F(e,{l:t.r})})}function W(e,t,n,r){void 0===r&&(r=0);for(var o=e.length-1;r<=o;){var i=Math.floor((r+o)/2),a=n(e[i],t);if(0===a)return i;if(-1===a){if(o-r<2)return i-1;o=i-1}else{if(o===r)return i;r=i+1}}throw new Error("Failed binary finding record in array - "+e.join(",")+", searched for "+t)}function N(e,t,n){return e[W(e,t,n)]}function D(e,t){return Math.round(e.getBoundingClientRect()[t])}function G(e){var t=e.size,n=e.startIndex,r=e.endIndex;return function(e){return e.start===n&&(e.end===r||Infinity===e.end)&&e.value===t}}function j(e,t){var n=e.index;return t===n?0:t<n?-1:1}function _(e,t){var n=e.offset;return t===n?0:t<n?-1:1}function K(e){return{index:e.index,value:e}}function Y(e,t,n){var r=e,o=0,i=0,a=0,l=0;if(0!==t){a=r[l=W(r,t-1,j)].offset;var s=L(n,t-1);o=s[0],i=s[1],r.length&&r[l].size===L(n,t)[1]&&(l-=1),r=r.slice(0,l+1)}else r=[];for(var c,m=u(M(n,t,Infinity));!(c=m()).done;){var d=c.value,f=d.start,p=d.value,h=(f-o)*i+a;r.push({offset:h,size:p,index:f}),o=f,a=h,i=p}return{offsetTree:r,lastIndex:o,lastOffset:a,lastSize:i}}function q(e,t){var n=t[0],r=t[1];n.length>0&&(0,t[2])("received item sizes",n,exports.LogLevel.DEBUG);var o=e.sizeTree,i=o,a=0;if(r.length>0&&y(o)&&2===n.length){var l=n[0].size,s=n[1].size;i=r.reduce(function(e,t){return H(H(e,t,l),t+1,s)},i)}else{var c=function(e,t){for(var n,r=y(e)?0:Infinity,o=u(t);!(n=o()).done;){var i=n.value,a=i.size,l=i.startIndex,s=i.endIndex;if(r=Math.min(r,l),y(e))e=H(e,0,a);else{var c=M(e,l-1,s+1);if(!c.some(G(i))){for(var m,d=!1,f=!1,p=u(c);!(m=p()).done;){var h=m.value,g=h.start,v=h.end,S=h.value;d?(s>=g||a===S)&&(e=E(e,g)):(f=S!==a,d=!0),v>s&&s>=g&&S!==a&&(e=H(e,s+1,S))}f&&(e=H(e,l,a))}}}return[e,r]}(i,n);i=c[0],a=c[1]}if(i===o)return e;var m=Y(e.offsetTree,a,i),d=m.offsetTree;return{sizeTree:i,offsetTree:d,lastIndex:m.lastIndex,lastOffset:m.lastOffset,lastSize:m.lastSize,groupOffsetTree:r.reduce(function(e,t){return H(e,t,Z(t,d))},b()),groupIndices:r}}function Z(e,t){if(0===t.length)return 0;var n=N(t,e,j);return n.size*(e-n.index)+n.offset}function J(e,t){if(!$(t))return e;for(var n=0;t.groupIndices[n]<=e+n;)n++;return e+n}function $(e){return!y(e.groupOffsetTree)}var Q={offsetHeight:"height",offsetWidth:"width"},X=o.system(function(e){var t=e[0].log,n=o.stream(),r=o.stream(),i=o.statefulStreamFromEmitter(r,0),l=o.stream(),s=o.stream(),u=o.statefulStream(0),c=o.statefulStream([]),m=o.statefulStream(void 0),d=o.statefulStream(void 0),f=o.statefulStream(function(e,t){return D(e,Q[t])}),p=o.statefulStream(void 0),h={offsetTree:[],sizeTree:b(),groupOffsetTree:b(),lastIndex:0,lastOffset:0,lastSize:0,groupIndices:[]},g=o.statefulStreamFromEmitter(o.pipe(n,o.withLatestFrom(c,t),o.scan(q,h),o.distinctUntilChanged()),h);o.connect(o.pipe(c,o.filter(function(e){return e.length>0}),o.withLatestFrom(g),o.map(function(e){var t=e[0],n=e[1],r=t.reduce(function(e,t,r){return H(e,t,Z(t,n.offsetTree)||r)},b());return a({},n,{groupIndices:t,groupOffsetTree:r})})),g),o.connect(o.pipe(r,o.withLatestFrom(g),o.filter(function(e){return e[0]<e[1].lastIndex}),o.map(function(e){var t=e[1];return[{startIndex:e[0],endIndex:t.lastIndex,size:t.lastSize}]})),n),o.connect(m,d);var v=o.statefulStreamFromEmitter(o.pipe(m,o.map(function(e){return void 0===e})),!0);o.connect(o.pipe(d,o.filter(function(e){return void 0!==e&&y(o.getValue(g).sizeTree)}),o.map(function(e){return[{startIndex:0,endIndex:0,size:e}]})),n);var S=o.streamFromEmitter(o.pipe(n,o.withLatestFrom(g),o.scan(function(e,t){var n=t[1];return{changed:n!==e.sizes,sizes:n}},{changed:!1,sizes:h}),o.map(function(e){return e.changed})));o.subscribe(o.pipe(u,o.scan(function(e,t){return{diff:e.prev-t,prev:t}},{diff:0,prev:0}),o.map(function(e){return e.diff})),function(e){e>0?o.publish(l,e):e<0&&o.publish(s,e)}),o.subscribe(o.pipe(u,o.withLatestFrom(t)),function(e){e[0]<0&&(0,e[1])("`firstItemIndex` prop should not be set to less than zero. If you don't know the total count, just use a very high value",{firstItemIndex:u},exports.LogLevel.ERROR)});var C=o.streamFromEmitter(l);o.connect(o.pipe(l,o.withLatestFrom(g),o.map(function(e){var t=e[0],n=e[1];if(n.groupIndices.length>0)throw new Error("Virtuoso: prepending items does not work with groups");return k(n.sizeTree).reduce(function(e,n){var r=n.k,o=n.v;return{ranges:[].concat(e.ranges,[{startIndex:e.prevIndex,endIndex:r+t-1,size:e.prevSize}]),prevIndex:r+t,prevSize:o}},{ranges:[],prevIndex:0,prevSize:n.lastSize}).ranges})),n);var I=o.streamFromEmitter(o.pipe(s,o.withLatestFrom(g),o.map(function(e){return Z(-e[0],e[1].offsetTree)})));return o.connect(o.pipe(s,o.withLatestFrom(g),o.map(function(e){var t=e[0],n=e[1];if(n.groupIndices.length>0)throw new Error("Virtuoso: shifting items does not work with groups");var r=k(n.sizeTree).reduce(function(e,n){var r=n.v;return H(e,Math.max(0,n.k+t),r)},b());return a({},n,{sizeTree:r},Y(n.offsetTree,0,r))})),g),{data:p,totalCount:r,sizeRanges:n,groupIndices:c,defaultItemSize:d,fixedItemSize:m,unshiftWith:l,shiftWith:s,shiftWithOffset:I,beforeUnshiftWith:C,firstItemIndex:u,sizes:g,listRefresh:S,statefulTotalCount:i,trackItemSizes:v,itemSize:f}},o.tup(g),{singleton:!0}),ee="undefined"!=typeof document&&"scrollBehavior"in document.documentElement.style;function te(e){var t="number"==typeof e?{index:e}:e;return t.align||(t.align="start"),t.behavior&&ee||(t.behavior="auto"),t.offset||(t.offset=0),t}var ne=o.system(function(e){var t=e[0],n=t.sizes,r=t.totalCount,i=t.listRefresh,a=e[1],l=a.scrollingInProgress,s=a.viewportHeight,u=a.scrollTo,c=a.smoothScrollTargetReached,m=a.headerHeight,d=a.footerHeight,f=e[2].log,p=o.stream(),h=o.statefulStream(0),g=null,v=null,S=null;function C(){g&&(g(),g=null),S&&(S(),S=null),v&&(clearTimeout(v),v=null),o.publish(l,!1)}return o.connect(o.pipe(p,o.withLatestFrom(n,s,r,h,m,d,f),o.map(function(e){var t=e[0],n=e[1],r=e[2],a=e[3],s=e[4],u=e[5],m=e[6],d=e[7],f=te(t),h=f.align,I=f.behavior,x=f.offset,T=a-1,w=f.index;"LAST"===w&&(w=T),w=J(w,n);var y=Z(w=Math.max(0,w,Math.min(T,w)),n.offsetTree)+u;"end"===h?(y=y-r+L(n.sizeTree,w)[1],w===T&&(y+=m)):"center"===h?y=y-r/2+L(n.sizeTree,w)[1]/2:y-=s,x&&(y+=x);var b=function(e){C(),e?(d("retrying to scroll to",{location:t},exports.LogLevel.DEBUG),o.publish(p,t)):d("list did not change, scroll successful",{},exports.LogLevel.DEBUG)};if(C(),"smooth"===I){var E=!1;S=o.subscribe(i,function(e){E=E||e}),g=o.handleNext(c,function(){b(E)})}else g=o.handleNext(o.pipe(i,function(e){var t=setTimeout(function(){e(!1)},50);return function(n){n&&(e(!0),clearTimeout(t))}}),b);return v=setTimeout(function(){C()},1200),o.publish(l,!0),d("scrolling from index to",{index:w,top:y,behavior:I},exports.LogLevel.DEBUG),{top:y,behavior:I}})),u),{scrollToIndex:p,topListHeight:h}},o.tup(X,p,g),{singleton:!0});function re(e,t,n){return"number"==typeof e?n===S&&"top"===t||"down"===n&&"bottom"===t?e:0:n===S?"top"===t?e.main:e.reverse:"bottom"===t?e.main:e.reverse}function oe(e,t){return"number"==typeof e?e:e[t]||0}var ie=o.system(function(e){var t=e[0],n=t.scrollTop,r=t.viewportHeight,i=t.deviation,a=t.headerHeight,l=o.stream(),s=o.statefulStream(0),u=o.statefulStream(0),m=o.statefulStream(0),d=o.statefulStream(0),f=o.statefulStreamFromEmitter(o.pipe(o.combineLatest(o.duc(n),o.duc(r),o.duc(a),o.duc(l,c),o.duc(d),o.duc(s),o.duc(u),o.duc(i),o.duc(m)),o.map(function(e){var t=e[0],n=e[1],r=e[2],o=e[3],i=o[0],a=o[1],l=e[4],s=e[6],u=e[7],c=e[8],m=t-u,d=e[5]+s,f=Math.max(r-m,0),p="none",h=oe(c,"top"),g=oe(c,"bottom");return i-=u,a+=r,(i+=r)>t+d-h&&(p=S),(a-=u)<t-f+n+g&&(p="down"),"none"!==p?[Math.max(m-r-re(l,"top",p)-h,0),m-f-s+n+re(l,"bottom",p)+g]:null}),o.filter(function(e){return null!=e}),o.distinctUntilChanged(c)),[0,0]);return{listBoundary:l,overscan:d,topListHeight:s,fixedHeaderHeight:u,increaseViewportBy:m,visibleRange:f}},o.tup(p),{singleton:!0}),ae=o.system(function(e){var t=e[0],n=t.scrollTo,r=t.scrollContainerState,i=o.stream(),l=o.stream(),s=o.stream(),u=o.statefulStream(!1),c=o.statefulStream(void 0);return o.connect(o.pipe(o.combineLatest(i,l),o.map(function(e){var t=e[0],n=t[1];return[Math.max(0,t[0]-e[1].offsetTop),n]})),r),o.connect(o.pipe(n,o.withLatestFrom(l),o.map(function(e){var t=e[0];return a({},t,{top:t.top+e[1].offsetTop})})),s),{useWindowScroll:u,customScrollParent:c,windowScrollContainerState:i,windowViewportRect:l,windowScrollTo:s}},o.tup(p)),le={items:[],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},se={items:[{index:0}],offsetBottom:0,offsetTop:0,top:0,bottom:0,itemHeight:0,itemWidth:0},ue=Math.round,ce=Math.ceil,me=Math.floor,de=Math.min,fe=Math.max;function pe(e,t){return Array.from({length:t-e+1}).map(function(t,n){return{index:n+e}})}var he=o.system(function(e){var t=e[0],n=t.overscan,r=t.visibleRange,i=t.listBoundary,l=e[1],s=l.scrollTop,u=l.viewportHeight,d=l.scrollBy,f=l.scrollTo,p=l.smoothScrollTargetReached,h=l.scrollContainerState,g=e[2],v=e[3],S=e[4],C=S.propsReady,I=S.didMount,x=e[5],T=x.windowViewportRect,w=x.windowScrollTo,y=x.useWindowScroll,b=x.customScrollParent,E=x.windowScrollContainerState,L=o.statefulStream(0),H=o.statefulStream(0),R=o.statefulStream(le),k=o.statefulStream({height:0,width:0}),z=o.statefulStream({height:0,width:0}),B=o.stream(),F=o.stream(),P=o.statefulStream(0);o.connect(o.pipe(I,o.withLatestFrom(H),o.filter(function(e){return 0!==e[1]}),o.map(function(e){return{items:pe(0,e[1]-1),top:0,bottom:0,offsetBottom:0,offsetTop:0,itemHeight:0,itemWidth:0}})),R),o.connect(o.pipe(o.combineLatest(o.duc(L),r,o.duc(z,function(e,t){return e&&e.width===t.width&&e.height===t.height})),o.withLatestFrom(k),o.map(function(e){var t=e[0],n=t[0],r=t[1],o=r[0],i=r[1],a=t[2],l=e[1],s=a.height,u=a.width,c=l.width;if(0===n||0===c)return le;if(0===u)return se;var m=Se(c,u),d=m*me(o/s),f=m*ce(i/s)-1;f=de(n-1,f);var p=pe(d=de(f,fe(0,d)),f),h=ge(l,a,p),g=h.top,v=h.bottom;return{items:p,offsetTop:g,offsetBottom:ce(n/m)*s-v,top:g,bottom:v,itemHeight:s,itemWidth:u}})),R),o.connect(o.pipe(k,o.map(function(e){return e.height})),u),o.connect(o.pipe(o.combineLatest(k,z,R),o.map(function(e){var t=ge(e[0],e[1],e[2].items);return[t.top,t.bottom]}),o.distinctUntilChanged(c)),i);var O=o.streamFromEmitter(o.pipe(o.duc(R),o.filter(function(e){return e.items.length>0}),o.withLatestFrom(L),o.filter(function(e){var t=e[0].items;return t[t.length-1].index===e[1]-1}),o.map(function(e){return e[1]-1}),o.distinctUntilChanged())),M=o.streamFromEmitter(o.pipe(o.duc(R),o.filter(function(e){var t=e.items;return t.length>0&&0===t[0].index}),o.mapTo(0),o.distinctUntilChanged())),V=o.streamFromEmitter(o.pipe(o.duc(R),o.filter(function(e){return e.items.length>0}),o.map(function(e){var t=e.items;return{startIndex:t[0].index,endIndex:t[t.length-1].index}}),o.distinctUntilChanged(m)));o.connect(V,v.scrollSeekRangeChanged),o.connect(o.pipe(B,o.withLatestFrom(k,z,L),o.map(function(e){var t=e[1],n=e[2],r=e[3],o=te(e[0]),i=o.align,a=o.behavior,l=o.offset,s=o.index;"LAST"===s&&(s=r-1);var u=ve(t,n,s=fe(0,s,de(r-1,s)));return"end"===i?u=ue(u-t.height+n.height):"center"===i&&(u=ue(u-t.height/2+n.height/2)),l&&(u+=l),{top:u,behavior:a}})),f);var U=o.statefulStreamFromEmitter(o.pipe(R,o.map(function(e){return e.offsetBottom+e.bottom})),0);return o.connect(o.pipe(T,o.map(function(e){return{width:e.visibleWidth,height:e.visibleHeight}})),k),a({totalCount:L,viewportDimensions:k,itemDimensions:z,scrollTop:s,scrollHeight:F,overscan:n,scrollBy:d,scrollTo:f,scrollToIndex:B,smoothScrollTargetReached:p,windowViewportRect:T,windowScrollTo:w,useWindowScroll:y,customScrollParent:b,windowScrollContainerState:E,deviation:P,scrollContainerState:h,initialItemCount:H},v,{gridState:R,totalListHeight:U},g,{startReached:M,endReached:O,rangeChanged:V,propsReady:C})},o.tup(ie,p,I,x,v,ae));function ge(e,t,n){var r=t.height;return void 0===r||0===n.length?{top:0,bottom:0}:{top:ve(e,t,n[0].index),bottom:ve(e,t,n[n.length-1].index)+r}}function ve(e,t,n){var r=Se(e.width,t.width);return me(n/r)*t.height}function Se(e,t){return fe(1,me(e/t))}function Ce(e,t){void 0===t&&(t=!0);var r=n.useRef(null),o=function(e){};if("undefined"!=typeof ResizeObserver){var i=new ResizeObserver(function(t){var n=t[0].target;null!==n.offsetParent&&e(n)});o=function(e){e&&t?(i.observe(e),r.current=e):(r.current&&i.unobserve(r.current),r.current=null)}}return{ref:r,callbackRef:o}}function Ie(e,t){return void 0===t&&(t=!0),Ce(e,t).callbackRef}function xe(e,t){var r=n.useRef(null),o=n.useCallback(function(n){if(null!==n){var o,i,a=n.getBoundingClientRect(),l=a.width;if(t){var s=t.getBoundingClientRect(),u=a.top-s.top;o=s.height-Math.max(0,u),i=u+t.scrollTop}else o=window.innerHeight-Math.max(0,a.top),i=a.top+window.pageYOffset;r.current={offsetTop:i,visibleHeight:o,visibleWidth:l},e(r.current)}},[e,t]),i=Ce(o),a=i.callbackRef,l=i.ref,s=n.useCallback(function(){o(l.current)},[o,l]);return n.useEffect(function(){if(t){t.addEventListener("scroll",s);var e=new ResizeObserver(s);return e.observe(t),function(){t.removeEventListener("scroll",s),e.unobserve(t)}}return window.addEventListener("scroll",s),window.addEventListener("resize",s),function(){window.removeEventListener("scroll",s),window.removeEventListener("resize",s)}},[s,t]),a}var Te="undefined"!=typeof document?n.useLayoutEffect:n.useEffect;function we(e,t,n,r,o,i){return Ie(function(n){for(var a=function(e,t,n,r){var o=e.length;if(0===o)return null;for(var i=[],a=0;a<o;a++){var l=e.item(a);if(l&&void 0!==l.dataset.index){var s=parseInt(l.dataset.index),u=parseFloat(l.dataset.knownSize),c=t(l,"offsetHeight");if(0===c&&r("Zero-sized element, this should not happen",{child:l},exports.LogLevel.ERROR),c!==u){var m=i[i.length-1];0===i.length||m.size!==c||m.endIndex!==s-1?i.push({startIndex:s,endIndex:s,size:c}):i[i.length-1].endIndex++}}}return i}(n.children,t,0,o),l=n.parentElement;!l.dataset.virtuosoScroller;)l=l.parentElement;var s=i?i.scrollTop:"window"===l.firstElementChild.dataset.viewportType?window.pageYOffset||document.documentElement.scrollTop:l.scrollTop;r(i?[Math.max(s,0),i.scrollHeight]:[Math.max(s,0),l.scrollHeight]),null!==a&&e(a)},n)}function ye(e,t,r,i,a){void 0===i&&(i=o.noop);var l=n.useRef(null),s=n.useRef(null),u=n.useRef(null),c=n.useCallback(function(n){var r=n.target,o=r===window||r===document?window.pageYOffset||document.documentElement.scrollTop:r.scrollTop,i=r===window?document.documentElement.scrollHeight:r.scrollHeight;e([Math.max(o,0),i]),null!==s.current&&(o===s.current||o<=0||o===r.scrollHeight-D(r,"height"))&&(s.current=null,t(!0),u.current&&(clearTimeout(u.current),u.current=null))},[e,t]);return n.useEffect(function(){var e=a||l.current;return i(a||l.current),c({target:e}),e.addEventListener("scroll",c,{passive:!0}),function(){i(null),e.removeEventListener("scroll",c)}},[l,c,r,i,a]),{scrollerRef:l,scrollByCallback:function(e){null===s.current&&l.current.scrollBy(e)},scrollToCallback:function(n){var r=l.current;if(r&&(!("offsetHeight"in r)||0!==r.offsetHeight)){var o,i,a,c="smooth"===n.behavior;if(r===window?(i=Math.max(D(document.documentElement,"height"),document.documentElement.scrollHeight),o=window.innerHeight,a=document.documentElement.scrollTop):(i=r.scrollHeight,o=D(r,"height"),a=r.scrollTop),n.top=Math.ceil(Math.max(Math.min(i-o,n.top),0)),Math.abs(o-i)<1.01||n.top===a)return e([a,i]),void(c&&t(!0));c?(s.current=n.top,u.current&&clearTimeout(u.current),u.current=setTimeout(function(){u.current=null,s.current=null,t(!0)},1e3)):s.current=null,r.scrollTo(n)}}}}var be=o.system(function(e){var t=e[0],n=t.sizes,r=t.listRefresh,i=t.defaultItemSize,a=e[1].scrollTop,l=e[2].scrollToIndex,s=e[3].didMount,u=o.statefulStream(!0),c=o.statefulStream(0);return o.connect(o.pipe(s,o.withLatestFrom(c),o.filter(function(e){return!!e[1]}),o.mapTo(!1)),u),o.subscribe(o.pipe(o.combineLatest(r,s),o.withLatestFrom(u,n,i),o.filter(function(e){var t=e[1],n=e[3];return e[0][1]&&(!y(e[2].sizeTree)||void 0!==n)&&!t}),o.withLatestFrom(c)),function(e){var t=e[1];setTimeout(function(){o.handleNext(a,function(){o.publish(u,!0)}),o.publish(l,t)})}),{scrolledToInitialItem:u,initialTopMostItemIndex:c}},o.tup(X,p,ne,v),{singleton:!0});function Ee(e){return!!e&&("smooth"===e?"smooth":"auto")}var Le=o.system(function(e){var t=e[0],n=t.totalCount,r=t.listRefresh,i=e[1],a=i.isAtBottom,l=i.atBottomState,s=e[2].scrollToIndex,u=e[3].scrolledToInitialItem,c=e[4],m=c.propsReady,d=c.didMount,f=e[5].log,p=e[6].scrollingInProgress,h=o.statefulStream(!1),g=null;function v(e){o.publish(s,{index:"LAST",align:"end",behavior:e})}return o.subscribe(o.pipe(o.combineLatest(o.pipe(o.duc(n),o.skip(1)),d),o.withLatestFrom(o.duc(h),a,u,p),o.map(function(e){var t=e[0],n=t[0],r=t[1]&&e[3],o="auto";return r&&(o=function(e,t){return"function"==typeof e?Ee(e(t)):t&&Ee(e)}(e[1],e[2]||e[4]),r=r&&!!o),{totalCount:n,shouldFollow:r,followOutputBehavior:o}}),o.filter(function(e){return e.shouldFollow})),function(e){var t=e.totalCount,n=e.followOutputBehavior;g&&(g(),g=null),g=o.handleNext(r,function(){o.getValue(f)("following output to ",{totalCount:t},exports.LogLevel.DEBUG),v(n),g=null})}),o.subscribe(o.pipe(o.combineLatest(o.duc(h),n,m),o.filter(function(e){return e[0]&&e[2]}),o.scan(function(e,t){var n=t[1];return{refreshed:e.value===n,value:n}},{refreshed:!1,value:0}),o.filter(function(e){return e.refreshed}),o.withLatestFrom(h,n)),function(e){var t=e[1],n=o.handleNext(l,function(e){!t||e.atBottom||"SIZE_INCREASED"!==e.notAtBottomBecause||g||(o.getValue(f)("scrolling to bottom due to increased size",{},exports.LogLevel.DEBUG),v("auto"))});setTimeout(n,100)}),o.subscribe(o.combineLatest(o.duc(h),l),function(e){var t=e[1];e[0]&&!t.atBottom&&"VIEWPORT_HEIGHT_DECREASING"===t.notAtBottomBecause&&v("auto")}),{followOutput:h}},o.tup(X,I,ne,be,v,g,p));function He(e){return e.reduce(function(e,t){return e.groupIndices.push(e.totalCount),e.totalCount+=t+1,e},{totalCount:0,groupIndices:[]})}var Re=t.system(function(e){var n=e[0],r=n.totalCount,o=n.groupIndices,i=n.sizes,a=e[1],l=a.scrollTop,s=a.headerHeight,u=t.stream(),c=t.stream(),m=t.streamFromEmitter(t.pipe(u,t.map(He)));return t.connect(t.pipe(m,t.map(t.prop("totalCount"))),r),t.connect(t.pipe(m,t.map(t.prop("groupIndices"))),o),t.connect(t.pipe(t.combineLatest(l,i,s),t.filter(function(e){return $(e[1])}),t.map(function(e){return L(e[1].groupOffsetTree,Math.max(e[0]-e[2],0),"v")[0]}),t.distinctUntilChanged(),t.map(function(e){return[e]})),c),{groupCounts:u,topItemsIndexes:c}},t.tup(X,p)),ke={items:[],topItems:[],offsetTop:0,offsetBottom:0,top:0,bottom:0,topListHeight:0,totalCount:0};function ze(e,t,n){if(0===e.length)return[];if(!$(t))return e.map(function(e){return a({},e,{index:e.index+n,originalIndex:e.index})});for(var r,o=[],i=M(t.groupOffsetTree,e[0].index,e[e.length-1].index),l=void 0,s=0,c=u(e);!(r=c()).done;){var m=r.value;(!l||l.end<m.index)&&(l=i.shift(),s=t.groupIndices.indexOf(l.start)),o.push(a({},m.index===l.start?{type:"group",index:s}:{index:m.index-(s+1)+n,groupIndex:s},{size:m.size,offset:m.offset,originalIndex:m.index,data:m.data}))}return o}function Be(e,t,n,r,o){var i=0,a=0;if(e.length>0){i=e[0].offset;var l=e[e.length-1];a=l.offset+l.size}var s=i,u=r.lastOffset+(n-r.lastIndex)*r.lastSize-a;return{items:ze(e,r,o),topItems:ze(t,r,o),topListHeight:t.reduce(function(e,t){return t.size+e},0),offsetTop:i,offsetBottom:u,top:s,bottom:a,totalCount:n}}var Fe,Pe,Oe,Me=o.system(function(e){var t=e[0],n=t.sizes,r=t.totalCount,i=t.data,l=t.firstItemIndex,s=e[1],d=e[2],f=d.visibleRange,p=d.listBoundary,h=d.topListHeight,g=e[3],v=g.scrolledToInitialItem,S=g.initialTopMostItemIndex,C=e[4].topListHeight,I=e[5],x=e[6].didMount,T=o.statefulStream([]),w=o.stream();o.connect(s.topItemsIndexes,T);var b=o.statefulStreamFromEmitter(o.pipe(o.combineLatest(x,o.duc(f),o.duc(r),o.duc(n),o.duc(S),v,o.duc(T),o.duc(l),i),o.filter(function(e){return e[0]}),o.map(function(e){var t=e[1],n=t[0],r=t[1],i=e[2],a=e[4],l=e[5],s=e[6],c=e[7],m=e[8],d=e[3],f=d.sizeTree,p=d.offsetTree;if(0===i||0===n&&0===r)return ke;if(y(f))return Be(function(e,t,n){if($(t)){var r=J(e,t);return[{index:L(t.groupOffsetTree,r)[0],size:0,offset:0},{index:r,size:0,offset:0,data:n&&n[0]}]}return[{index:e,size:0,offset:0,data:n&&n[0]}]}(function(e,t){return"number"==typeof e?e:"LAST"===e.index?t-1:e.index}(a,i),d,m),[],i,d,c);var h=[];if(s.length>0)for(var g,v=s[0],S=s[s.length-1],C=0,I=u(M(f,v,S));!(g=I()).done;)for(var x=g.value,T=x.value,w=Math.max(x.start,v),b=Math.min(x.end,S),E=w;E<=b;E++)h.push({index:E,size:T,offset:C,data:m&&m[E]}),C+=T;if(!l)return Be([],h,i,d,c);var H=s.length>0?s[s.length-1]+1:0,R=function(e,t,n,r){return void 0===r&&(r=0),r>0&&(t=Math.max(t,N(e,r,j).offset)),V((i=n,l=W(o=e,t,a=_),s=W(o,i,a,l),o.slice(l,s+1)),K);var o,i,a,l,s}(p,n,r,H);if(0===R.length)return null;var k=i-1;return Be(o.tap([],function(e){for(var t,o=u(R);!(t=o()).done;){var i=t.value,a=i.value,l=a.offset,s=i.start,c=a.size;a.offset<n&&(l+=((s+=Math.floor((n-a.offset)/c))-i.start)*c),s<H&&(l+=(H-s)*c,s=H);for(var d=Math.min(i.end,k),f=s;f<=d&&!(l>=r);f++)e.push({index:f,size:c,offset:l,data:m&&m[f]}),l+=c}}),h,i,d,c)}),o.filter(function(e){return null!==e}),o.distinctUntilChanged()),ke);return o.connect(o.pipe(i,o.filter(function(e){return void 0!==e}),o.map(function(e){return e.length})),r),o.connect(o.pipe(b,o.map(o.prop("topListHeight"))),C),o.connect(C,h),o.connect(o.pipe(b,o.map(function(e){return[e.top,e.bottom]})),p),o.connect(o.pipe(b,o.map(function(e){return e.items})),w),a({listState:b,topItemsIndexes:T,endReached:o.streamFromEmitter(o.pipe(b,o.filter(function(e){return e.items.length>0}),o.withLatestFrom(r,i),o.filter(function(e){var t=e[0].items;return t[t.length-1].originalIndex===e[1]-1}),o.map(function(e){return[e[1]-1,e[2]]}),o.distinctUntilChanged(c),o.map(function(e){return e[0]}))),startReached:o.streamFromEmitter(o.pipe(b,o.throttleTime(200),o.filter(function(e){var t=e.items;return t.length>0&&t[0].originalIndex===e.topItems.length}),o.map(function(e){return e.items[0].index}),o.distinctUntilChanged())),rangeChanged:o.streamFromEmitter(o.pipe(b,o.filter(function(e){return e.items.length>0}),o.map(function(e){var t=e.items;return{startIndex:t[0].index,endIndex:t[t.length-1].index}}),o.distinctUntilChanged(m))),itemsRendered:w},I)},o.tup(X,Re,ie,be,ne,I,v),{singleton:!0}),Ve=o.system(function(e){var t=e[0],n=t.sizes,r=t.firstItemIndex,i=t.data,a=e[1].listState,l=e[2].didMount,s=o.statefulStream(0);return o.connect(o.pipe(l,o.withLatestFrom(s),o.filter(function(e){return 0!==e[1]}),o.withLatestFrom(n,r,i),o.map(function(e){var t=e[0][1],n=e[1],r=e[2],o=e[3],i=void 0===o?[]:o,a=0;if(n.groupIndices.length>0)for(var l,s=u(n.groupIndices);!((l=s()).done||l.value-a>=t);)a++;var c=t+a;return Be(Array.from({length:c}).map(function(e,t){return{index:t,size:0,offset:0,data:i[t]}}),[],c,n,r)})),a),{initialItemCount:s}},o.tup(X,Me,v),{singleton:!0}),Ue=t.system(function(e){var n=e[0].topItemsIndexes,r=t.statefulStream(0);return t.connect(t.pipe(r,t.filter(function(e){return e>0}),t.map(function(e){return Array.from({length:e}).map(function(e,t){return t})})),n),{topItemCount:r}},t.tup(Me)),Ae=o.system(function(e){var t=e[0],n=t.footerHeight,r=t.headerHeight,i=e[1].listState,a=o.stream(),l=o.statefulStreamFromEmitter(o.pipe(o.combineLatest(n,r,i),o.map(function(e){var t=e[2];return e[0]+e[1]+t.offsetBottom+t.bottom})),0);return o.connect(o.duc(l),a),{totalListHeight:l,totalListHeightChanged:a}},o.tup(p,Me),{singleton:!0}),We=o.system(function(e){var t=e[0],n=t.scrollBy,r=t.scrollTop,i=t.deviation,a=t.scrollingInProgress,l=e[1],s=l.isScrolling,u=l.isAtBottom,c=l.atBottomState,m=l.scrollDirection,d=e[3],f=d.beforeUnshiftWith,p=d.shiftWithOffset,h=d.sizes,g=e[4].log,v=o.streamFromEmitter(o.pipe(e[2].listState,o.withLatestFrom(l.lastJumpDueToItemResize),o.scan(function(e,t){var n=e[1],r=t[0],o=r.items,i=r.totalCount,a=t[1],l=0;if(e[2]===i){if(n.length>0&&o.length>0){var s=1===o.length;if(0!==o[0].originalIndex||0!==n[0].originalIndex)for(var u=function(e){var t=o[e],r=n.find(function(e){return e.originalIndex===t.originalIndex});return r?t.offset!==r.offset||s?(l=t.offset-r.offset+t.size-r.size,"break"):void 0:"continue"},c=o.length-1;c>=0;c--){var m=u(c);if("continue"!==m&&"break"===m)break}}0!==l&&(l+=a)}return[l,o,i]},[0,[],0]),o.filter(function(e){return 0!==e[0]}),o.withLatestFrom(r,m,a,g,u,c),o.filter(function(e){return!e[3]&&0!==e[1]&&e[2]===S}),o.map(function(e){var t=e[0][0];return(0,e[4])("Upward scrolling compensation",{amount:t},exports.LogLevel.DEBUG),t})));return o.connect(o.pipe(v,o.withLatestFrom(i),o.map(function(e){return e[1]-e[0]})),i),o.subscribe(o.pipe(o.combineLatest(o.statefulStreamFromEmitter(s,!1),i),o.filter(function(e){return!e[0]&&0!==e[1]}),o.map(function(e){return e[1]}),o.throttleTime(1)),function(e){e>0?(o.publish(n,{top:-e,behavior:"auto"}),o.publish(i,0)):(o.publish(i,0),o.publish(n,{top:-e,behavior:"auto"}))}),o.connect(o.pipe(p,o.map(function(e){return{top:-e}})),n),o.connect(o.pipe(f,o.withLatestFrom(h),o.map(function(e){return e[0]*e[1].lastSize})),v),{deviation:i}},o.tup(p,I,Me,X,g)),Ne=o.system(function(e){var t=e[0].totalListHeight,n=e[1].didMount,r=e[2].scrollTo,i=o.statefulStream(0);return o.subscribe(o.pipe(n,o.withLatestFrom(i),o.filter(function(e){return 0!==e[1]}),o.map(function(e){return{top:e[1]}})),function(e){o.handleNext(o.pipe(t,o.filter(function(e){return 0!==e})),function(){setTimeout(function(){o.publish(r,e)})})}),{initialScrollTop:i}},o.tup(Ae,v,p),{singleton:!0}),De=o.system(function(e){var t=e[0].viewportHeight,n=e[1].totalListHeight,r=o.statefulStream(!1);return{alignToBottom:r,paddingTopAddition:o.statefulStreamFromEmitter(o.pipe(o.combineLatest(r,t,n),o.filter(function(e){return e[0]}),o.map(function(e){return Math.max(0,e[1]-e[2])}),o.distinctUntilChanged()),0)}},o.tup(p,Ae),{singleton:!0}),Ge=o.system(function(e){var t=e[0],n=t.sizes,r=t.totalCount,i=e[1],a=i.scrollTop,l=i.viewportHeight,s=i.headerHeight,u=i.scrollingInProgress,c=e[2].scrollToIndex,m=o.stream();return o.connect(o.pipe(m,o.withLatestFrom(n,l,r,s,a),o.map(function(e){var t=e[0],n=t.index,r=t.behavior,i=void 0===r?"auto":r,a=t.done,l=e[1],s=e[2],c=e[4],m=e[5],d=e[3]-1,f=null;n=J(n,l);var p=Z(n=Math.max(0,n,Math.min(d,n)),l.offsetTree)+c;return p<m?f={index:n,behavior:i,align:"start"}:p+L(l.sizeTree,n)[1]>m+s&&(f={index:n,behavior:i,align:"end"}),f?a&&o.handleNext(o.pipe(u,o.skip(1),o.filter(function(e){return!1===e})),a):a&&a(),f}),o.filter(function(e){return null!==e})),c),{scrollIntoView:m}},o.tup(X,p,ne,Me,g),{singleton:!0}),je=["listState","topItemsIndexes"],_e=o.system(function(e){return a({},e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8])},o.tup(ie,Ve,v,x,Ae,Ne,De,ae,Ge)),Ke=o.system(function(e){var t=e[0],n=t.totalCount,r=t.sizeRanges,i=t.fixedItemSize,s=t.defaultItemSize,u=t.trackItemSizes,c=t.itemSize,m=t.data,d=t.firstItemIndex,f=t.groupIndices,p=t.statefulTotalCount,h=e[1],g=h.initialTopMostItemIndex,v=h.scrolledToInitialItem,S=e[2],C=e[3],I=e[4],x=I.listState,T=I.topItemsIndexes,w=l(I,je),y=e[5].scrollToIndex,b=e[7].topItemCount,E=e[8].groupCounts,L=e[9],H=e[10];return o.connect(w.rangeChanged,L.scrollSeekRangeChanged),o.connect(o.pipe(L.windowViewportRect,o.map(o.prop("visibleHeight"))),S.viewportHeight),a({totalCount:n,data:m,firstItemIndex:d,sizeRanges:r,initialTopMostItemIndex:g,scrolledToInitialItem:v,topItemsIndexes:T,topItemCount:b,groupCounts:E,fixedItemHeight:i,defaultItemHeight:s},C,{statefulTotalCount:p,listState:x,scrollToIndex:y,trackItemSizes:u,itemSize:c,groupIndices:f},w,L,S,H)},o.tup(X,be,p,Le,Me,ne,We,Ue,Re,_e,g)),Ye=(Fe=function(){if("undefined"==typeof document)return"sticky";var e=document.createElement("div");return e.style.position="-webkit-sticky","-webkit-sticky"===e.style.position?"-webkit-sticky":"sticky"},Oe=!1,function(){return Oe||(Oe=!0,Pe=Fe()),Pe}),qe=["placeholder"],Ze=["style","children"],Je=["style","children"];function $e(e){return e}var Qe=t.system(function(){var e=t.statefulStream(function(e){return"Item "+e}),n=t.statefulStream(null),r=t.statefulStream(function(e){return"Group "+e}),o=t.statefulStream({}),i=t.statefulStream($e),a=t.statefulStream("div"),l=t.statefulStream(t.noop),s=function(e,n){return void 0===n&&(n=null),t.statefulStreamFromEmitter(t.pipe(o,t.map(function(t){return t[e]}),t.distinctUntilChanged()),n)};return{context:n,itemContent:e,groupContent:r,components:o,computeItemKey:i,headerFooterTag:a,scrollerRef:l,FooterComponent:s("Footer"),HeaderComponent:s("Header"),TopItemListComponent:s("TopItemList"),ListComponent:s("List","div"),ItemComponent:s("Item","div"),GroupComponent:s("Group","div"),ScrollerComponent:s("Scroller","div"),EmptyPlaceholder:s("EmptyPlaceholder"),ScrollSeekPlaceholder:s("ScrollSeekPlaceholder")}});function Xe(e,n){var r=t.stream();return t.subscribe(r,function(){return console.warn("react-virtuoso: You are using a deprecated property. "+n,"color: red;","color: inherit;","color: blue;")}),t.connect(r,e),r}var et=t.system(function(e){var n=e[0],r=e[1],o={item:Xe(r.itemContent,"Rename the %citem%c prop to %citemContent."),group:Xe(r.groupContent,"Rename the %cgroup%c prop to %cgroupContent."),topItems:Xe(n.topItemCount,"Rename the %ctopItems%c prop to %ctopItemCount."),itemHeight:Xe(n.fixedItemHeight,"Rename the %citemHeight%c prop to %cfixedItemHeight."),scrollingStateChange:Xe(n.isScrolling,"Rename the %cscrollingStateChange%c prop to %cisScrolling."),adjustForPrependedItems:t.stream(),maxHeightCacheSize:t.stream(),footer:t.stream(),header:t.stream(),HeaderContainer:t.stream(),FooterContainer:t.stream(),ItemContainer:t.stream(),ScrollContainer:t.stream(),GroupContainer:t.stream(),ListContainer:t.stream(),emptyComponent:t.stream(),scrollSeek:t.stream()};function i(e,n,o){t.connect(t.pipe(e,t.withLatestFrom(r.components),t.map(function(e){var t,r=e[0],i=e[1];return console.warn("react-virtuoso: "+o+" property is deprecated. Pass components."+n+" instead."),a({},i,((t={})[n]=r,t))})),r.components)}return t.subscribe(o.adjustForPrependedItems,function(){console.warn("react-virtuoso: adjustForPrependedItems is no longer supported. Use the firstItemIndex property instead - https://virtuoso.dev/prepend-items.","color: red;","color: inherit;","color: blue;")}),t.subscribe(o.maxHeightCacheSize,function(){console.warn("react-virtuoso: maxHeightCacheSize is no longer necessary. Setting it has no effect - remove it from your code.")}),t.subscribe(o.HeaderContainer,function(){console.warn("react-virtuoso: HeaderContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the header component and pass components.Header to change its contents.")}),t.subscribe(o.FooterContainer,function(){console.warn("react-virtuoso: FooterContainer is deprecated. Use headerFooterTag if you want to change the wrapper of the footer component and pass components.Footer to change its contents.")}),t.subscribe(o.scrollSeek,function(e){var o=e.placeholder,i=l(e,qe);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),t.publish(r.components,a({},t.getValue(r.components),{ScrollSeekPlaceholder:o})),t.publish(n.scrollSeekConfiguration,i)}),i(o.footer,"Footer","footer"),i(o.header,"Header","header"),i(o.ItemContainer,"Item","ItemContainer"),i(o.ListContainer,"List","ListContainer"),i(o.ScrollContainer,"Scroller","ScrollContainer"),i(o.emptyComponent,"EmptyPlaceholder","emptyComponent"),i(o.GroupContainer,"Group","GroupContainer"),a({},n,r,o)},t.tup(Ke,Qe)),tt=function(e){return i.createElement("div",{style:{height:e.height}})},nt={position:Ye(),zIndex:1,overflowAnchor:"none"},rt=i.memo(function(e){var r=e.showTopList,o=void 0!==r&&r,i=Ct("listState"),l=Ct("deviation"),s=St("sizeRanges"),u=Ct("useWindowScroll"),c=Ct("customScrollParent"),m=St("windowScrollContainerState"),d=St("scrollContainerState"),f=c||u?m:d,p=Ct("itemContent"),h=Ct("context"),g=Ct("groupContent"),v=Ct("trackItemSizes"),S=Ct("itemSize"),C=Ct("log"),I=we(s,S,v,o?t.noop:f,C,c),x=Ct("EmptyPlaceholder"),T=Ct("ScrollSeekPlaceholder")||tt,w=Ct("ListComponent"),y=Ct("ItemComponent"),b=Ct("GroupComponent"),E=Ct("computeItemKey"),L=Ct("isSeeking"),H=Ct("groupIndices").length>0,R=Ct("paddingTopAddition"),k=Ct("firstItemIndex"),z=Ct("statefulTotalCount"),B=o?{}:{boxSizing:"border-box",paddingTop:i.offsetTop+R,paddingBottom:i.offsetBottom,marginTop:l};return!o&&0===z&&x?n.createElement(x,lt(x,h)):n.createElement(w,a({},lt(w,h),{ref:I,style:B,"data-test-id":o?"virtuoso-top-item-list":"virtuoso-item-list"}),(o?i.topItems:i.items).map(function(e){var t=e.originalIndex,r=E(t+k,e.data,h);return L?n.createElement(T,a({},lt(T,h),{key:r,index:e.index,height:e.size,type:e.type||"item"},"group"===e.type?{}:{groupIndex:e.groupIndex})):"group"===e.type?n.createElement(b,a({},lt(b,h),{key:r,"data-index":t,"data-known-size":e.size,"data-item-index":e.index,style:nt}),g(e.index)):n.createElement(y,a({},lt(y,h),{key:r,"data-index":t,"data-known-size":e.size,"data-item-index":e.index,"data-item-group-index":e.groupIndex,style:{overflowAnchor:"none"}}),H?p(e.index,e.groupIndex,e.data,h):p(e.index,e.data,h))}))}),ot={height:"100%",outline:"none",overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},it={width:"100%",height:"100%",position:"absolute",top:0},at={width:"100%",position:Ye(),top:0};function lt(e,t){if("string"!=typeof e)return{context:t}}var st=i.memo(function(){var e=Ct("HeaderComponent"),t=St("headerHeight"),r=Ct("headerFooterTag"),o=Ie(function(e){return t(D(e,"height"))}),i=Ct("context");return e?n.createElement(r,{ref:o},n.createElement(e,lt(e,i))):null}),ut=i.memo(function(){var e=Ct("FooterComponent"),t=St("footerHeight"),r=Ct("headerFooterTag"),o=Ie(function(e){return t(D(e,"height"))}),i=Ct("context");return e?n.createElement(r,{ref:o},n.createElement(e,lt(e,i))):null});function ct(e){var t=e.usePublisher,r=e.useEmitter,o=e.useEmitterValue;return i.memo(function(e){var i=e.style,s=e.children,u=l(e,Ze),c=t("scrollContainerState"),m=o("ScrollerComponent"),d=t("smoothScrollTargetReached"),f=o("scrollerRef"),p=o("context"),h=ye(c,d,m,f),g=h.scrollerRef,v=h.scrollByCallback;return r("scrollTo",h.scrollToCallback),r("scrollBy",v),n.createElement(m,a({ref:g,style:a({},ot,i),"data-test-id":"virtuoso-scroller","data-virtuoso-scroller":!0,tabIndex:0},u,lt(m,p)),s)})}function mt(e){var r=e.usePublisher,o=e.useEmitter,s=e.useEmitterValue;return i.memo(function(e){var i=e.style,u=e.children,c=l(e,Je),m=r("windowScrollContainerState"),d=s("ScrollerComponent"),f=r("smoothScrollTargetReached"),p=s("totalListHeight"),h=s("deviation"),g=s("customScrollParent"),v=s("context"),S=ye(m,f,d,t.noop,g),C=S.scrollerRef,I=S.scrollByCallback,x=S.scrollToCallback;return Te(function(){return C.current=g||window,function(){C.current=null}},[C,g]),o("windowScrollTo",x),o("scrollBy",I),n.createElement(d,a({style:a({position:"relative"},i,0!==p?{height:p+h}:{}),"data-virtuoso-scroller":!0},c,lt(d,v)),u)})}var dt=function(e){var n=e.children,r=St("viewportHeight"),o=Ie(t.compose(r,function(e){return D(e,"height")}));return i.createElement("div",{style:it,ref:o,"data-viewport-type":"element"},n)},ft=function(e){var t=e.children,n=xe(St("windowViewportRect"),Ct("customScrollParent"));return i.createElement("div",{ref:n,style:it,"data-viewport-type":"window"},t)},pt=function(e){var t=e.children,r=Ct("TopItemListComponent"),o=Ct("headerHeight"),i=a({},at,{marginTop:o+"px"}),l=Ct("context");return n.createElement(r||"div",{style:i,context:l},t)},ht=i.memo(function(e){var t=Ct("useWindowScroll"),n=Ct("topItemsIndexes").length>0,r=Ct("customScrollParent"),o=r||t?ft:dt;return i.createElement(r||t?Tt:xt,a({},e),i.createElement(o,null,i.createElement(st,null),i.createElement(rt,null),i.createElement(ut,null)),n&&i.createElement(pt,null,i.createElement(rt,{showTopList:!0})))}),gt=e.systemToComponent(et,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",groupContent:"groupContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",headerFooterTag:"headerFooterTag",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel",item:"item",group:"group",topItems:"topItems",itemHeight:"itemHeight",scrollingStateChange:"scrollingStateChange",maxHeightCacheSize:"maxHeightCacheSize",footer:"footer",header:"header",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",GroupContainer:"GroupContainer",emptyComponent:"emptyComponent",HeaderContainer:"HeaderContainer",FooterContainer:"FooterContainer",scrollSeek:"scrollSeek"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy",adjustForPrependedItems:"adjustForPrependedItems"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},ht),vt=gt.Component,St=gt.usePublisher,Ct=gt.useEmitterValue,It=gt.useEmitter,xt=ct({usePublisher:St,useEmitterValue:Ct,useEmitter:It}),Tt=mt({usePublisher:St,useEmitterValue:Ct,useEmitter:It}),wt=["placeholder"],yt=o.system(function(){var e=o.statefulStream(function(e){return"Item "+e}),t=o.statefulStream({}),n=o.statefulStream(null),r=o.statefulStream("virtuoso-grid-item"),i=o.statefulStream("virtuoso-grid-list"),a=o.statefulStream($e),l=o.statefulStream(o.noop),s=function(e,n){return void 0===n&&(n=null),o.statefulStreamFromEmitter(o.pipe(t,o.map(function(t){return t[e]}),o.distinctUntilChanged()),n)};return{context:n,itemContent:e,components:t,computeItemKey:a,itemClassName:r,listClassName:i,scrollerRef:l,ListComponent:s("List","div"),ItemComponent:s("Item","div"),ScrollerComponent:s("Scroller","div"),ScrollSeekPlaceholder:s("ScrollSeekPlaceholder","div")}}),bt=o.system(function(e){var t=e[0],n=e[1],r={item:Xe(n.itemContent,"Rename the %citem%c prop to %citemContent."),ItemContainer:o.stream(),ScrollContainer:o.stream(),ListContainer:o.stream(),emptyComponent:o.stream(),scrollSeek:o.stream()};function i(e,t,r){o.connect(o.pipe(e,o.withLatestFrom(n.components),o.map(function(e){var n,o=e[0],i=e[1];return console.warn("react-virtuoso: "+r+" property is deprecated. Pass components."+t+" instead."),a({},i,((n={})[t]=o,n))})),n.components)}return o.subscribe(r.scrollSeek,function(e){var r=e.placeholder,i=l(e,wt);console.warn("react-virtuoso: scrollSeek property is deprecated. Pass scrollSeekConfiguration and specify the placeholder in components.ScrollSeekPlaceholder instead."),o.publish(n.components,a({},o.getValue(n.components),{ScrollSeekPlaceholder:r})),o.publish(t.scrollSeekConfiguration,i)}),i(r.ItemContainer,"Item","ItemContainer"),i(r.ListContainer,"List","ListContainer"),i(r.ScrollContainer,"Scroller","ScrollContainer"),a({},t,n,r)},o.tup(he,yt)),Et=i.memo(function(){var e=Ft("gridState"),t=Ft("listClassName"),r=Ft("itemClassName"),o=Ft("itemContent"),i=Ft("computeItemKey"),l=Ft("isSeeking"),s=Bt("scrollHeight"),u=Ft("ItemComponent"),c=Ft("ListComponent"),m=Ft("ScrollSeekPlaceholder"),d=Ft("context"),f=Bt("itemDimensions"),p=Ie(function(e){s(e.parentElement.parentElement.scrollHeight);var t=e.firstChild;t&&f(t.getBoundingClientRect())});return n.createElement(c,a({ref:p,className:t},lt(c,d),{style:{paddingTop:e.offsetTop,paddingBottom:e.offsetBottom}}),e.items.map(function(t){var s=i(t.index);return l?n.createElement(m,a({key:s},lt(m,d),{index:t.index,height:e.itemHeight,width:e.itemWidth})):n.createElement(u,a({},lt(u,d),{className:r,"data-index":t.index,key:s}),o(t.index,d))}))}),Lt=function(e){var t=e.children,n=Bt("viewportDimensions"),r=Ie(function(e){n(e.getBoundingClientRect())});return i.createElement("div",{style:it,ref:r},t)},Ht=function(e){var t=e.children,n=xe(Bt("windowViewportRect"),Ft("customScrollParent"));return i.createElement("div",{ref:n,style:it},t)},Rt=i.memo(function(e){var t=a({},e),n=Ft("useWindowScroll"),r=Ft("customScrollParent"),o=r||n?Ht:Lt;return i.createElement(r||n?Mt:Ot,a({},t),i.createElement(o,null,i.createElement(Et,null)))}),kt=e.systemToComponent(bt,{optional:{totalCount:"totalCount",overscan:"overscan",itemContent:"itemContent",components:"components",computeItemKey:"computeItemKey",initialItemCount:"initialItemCount",scrollSeekConfiguration:"scrollSeekConfiguration",listClassName:"listClassName",itemClassName:"itemClassName",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",item:"item",ItemContainer:"ItemContainer",ScrollContainer:"ScrollContainer",ListContainer:"ListContainer",scrollSeek:"scrollSeek"},methods:{scrollTo:"scrollTo",scrollBy:"scrollBy",scrollToIndex:"scrollToIndex"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange"}},Rt),zt=kt.Component,Bt=kt.usePublisher,Ft=kt.useEmitterValue,Pt=kt.useEmitter,Ot=ct({usePublisher:Bt,useEmitterValue:Ft,useEmitter:Pt}),Mt=mt({usePublisher:Bt,useEmitterValue:Ft,useEmitter:Pt}),Vt=t.system(function(){var e=t.statefulStream(function(e){return i.createElement("td",null,"Item $",e)}),n=t.statefulStream(null),r=t.statefulStream(null),o=t.statefulStream({}),a=t.statefulStream($e),l=t.statefulStream(t.noop),s=function(e,n){return void 0===n&&(n=null),t.statefulStreamFromEmitter(t.pipe(o,t.map(function(t){return t[e]}),t.distinctUntilChanged()),n)};return{context:n,itemContent:e,fixedHeaderContent:r,components:o,computeItemKey:a,scrollerRef:l,TableComponent:s("Table","table"),TableHeadComponent:s("TableHead","thead"),TableBodyComponent:s("TableBody","tbody"),TableRowComponent:s("TableRow","tr"),ScrollerComponent:s("Scroller","div"),EmptyPlaceholder:s("EmptyPlaceholder"),ScrollSeekPlaceholder:s("ScrollSeekPlaceholder")}}),Ut=t.system(function(e){return a({},e[0],e[1])},t.tup(Ke,Vt)),At=function(e){return i.createElement("tr",null,i.createElement("td",{style:{height:e.height}}))},Wt=function(e){return i.createElement("tr",null,i.createElement("td",{style:{height:e.height,padding:0,border:0}}))},Nt=i.memo(function(){var e=qt("listState"),t=qt("deviation"),r=Yt("sizeRanges"),o=qt("useWindowScroll"),l=qt("customScrollParent"),s=Yt("windowScrollContainerState"),u=Yt("scrollContainerState"),c=l||o?s:u,m=qt("itemContent"),d=qt("trackItemSizes"),f=we(r,qt("itemSize"),d,c,qt("log"),l),p=qt("EmptyPlaceholder"),h=qt("ScrollSeekPlaceholder")||At,g=qt("TableBodyComponent"),v=qt("TableRowComponent"),S=qt("computeItemKey"),C=qt("isSeeking"),I=qt("paddingTopAddition"),x=qt("firstItemIndex"),T=qt("statefulTotalCount"),w=qt("context");if(0===T&&p)return n.createElement(p,lt(p,w));var y=e.offsetTop+I+t,b=e.offsetBottom,E=y>0?i.createElement(Wt,{height:y,key:"padding-top"}):null,L=b>0?i.createElement(Wt,{height:b,key:"padding-bottom"}):null,H=e.items.map(function(e){var t=e.originalIndex,r=S(t+x,e.data,w);return C?n.createElement(h,a({},lt(h,w),{key:r,index:e.index,height:e.size,type:e.type||"item"})):n.createElement(v,a({},lt(v,w),{key:r,"data-index":t,"data-known-size":e.size,"data-item-index":e.index,style:{overflowAnchor:"none"}}),m(e.index,e.data,w))});return n.createElement(g,a({ref:f,"data-test-id":"virtuoso-item-list"},lt(g,w)),[E].concat(H,[L]))}),Dt=function(e){var n=e.children,r=Yt("viewportHeight"),o=Ie(t.compose(r,function(e){return D(e,"height")}));return i.createElement("div",{style:it,ref:o,"data-viewport-type":"element"},n)},Gt=function(e){var t=e.children,n=xe(Yt("windowViewportRect"),qt("customScrollParent"));return i.createElement("div",{ref:n,style:it,"data-viewport-type":"window"},t)},jt=i.memo(function(e){var n=qt("useWindowScroll"),r=qt("customScrollParent"),o=Yt("fixedHeaderHeight"),l=qt("fixedHeaderContent"),s=qt("context"),u=Ie(t.compose(o,function(e){return D(e,"height")})),c=r||n?$t:Jt,m=r||n?Gt:Dt,d=qt("TableComponent"),f=qt("TableHeadComponent"),p=l?i.createElement(f,a({key:"TableHead",style:{zIndex:1,position:"sticky",top:0},ref:u},lt(f,s)),l()):null;return i.createElement(c,a({},e),i.createElement(m,null,i.createElement(d,a({style:{borderSpacing:0}},lt(d,s)),[p,i.createElement(Nt,{key:"TableBody"})])))}),_t=e.systemToComponent(Ut,{required:{},optional:{context:"context",followOutput:"followOutput",firstItemIndex:"firstItemIndex",itemContent:"itemContent",fixedHeaderContent:"fixedHeaderContent",overscan:"overscan",increaseViewportBy:"increaseViewportBy",totalCount:"totalCount",topItemCount:"topItemCount",initialTopMostItemIndex:"initialTopMostItemIndex",components:"components",groupCounts:"groupCounts",atBottomThreshold:"atBottomThreshold",computeItemKey:"computeItemKey",defaultItemHeight:"defaultItemHeight",fixedItemHeight:"fixedItemHeight",itemSize:"itemSize",scrollSeekConfiguration:"scrollSeekConfiguration",data:"data",initialItemCount:"initialItemCount",initialScrollTop:"initialScrollTop",alignToBottom:"alignToBottom",useWindowScroll:"useWindowScroll",customScrollParent:"customScrollParent",scrollerRef:"scrollerRef",logLevel:"logLevel"},methods:{scrollToIndex:"scrollToIndex",scrollIntoView:"scrollIntoView",scrollTo:"scrollTo",scrollBy:"scrollBy"},events:{isScrolling:"isScrolling",endReached:"endReached",startReached:"startReached",rangeChanged:"rangeChanged",atBottomStateChange:"atBottomStateChange",atTopStateChange:"atTopStateChange",totalListHeightChanged:"totalListHeightChanged",itemsRendered:"itemsRendered",groupIndices:"groupIndices"}},jt),Kt=_t.Component,Yt=_t.usePublisher,qt=_t.useEmitterValue,Zt=_t.useEmitter,Jt=ct({usePublisher:Yt,useEmitterValue:qt,useEmitter:Zt}),$t=mt({usePublisher:Yt,useEmitterValue:qt,useEmitter:Zt}),Qt=vt,Xt=Kt,en=zt;exports.GroupedVirtuoso=vt,exports.TableVirtuoso=Xt,exports.Virtuoso=Qt,exports.VirtuosoGrid=en;
//# sourceMappingURL=index.js.map
